<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Analytics/Data Lake/Traffic/Unique Devices/Last access solution - Wikitech</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"3a45cda4-05e7-4639-a790-b9e5a6c51105","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution","wgTitle":"Analytics/Data Lake/Traffic/Unique Devices/Last access solution","wgCurRevisionId":1872699,"wgRevisionId":1872699,"wgArticleId":20878,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution","wgRelevantArticleId":20878,"wgIsProbablyEditable":false,
"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"Analytics/Unique_Devices/Last_access_solution","wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFMode":"stable","wgMFAmc":false,"wgMFAmcOutreachActive":false,"wgMFAmcOutreachUserEligible":false,"wgMFLazyLoadImages":true,"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgMFIsPageContentModelEditable":true,"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":20000,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgULSCurrentAutonym":"English","wgInternalRedirectTargetUrl":"/wiki/Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution","wgEditSubmitButtonLabelPublish":true,"wgMinervaPermissions":{"watch":true,"talk":true},"wgMinervaFeatures":{"beta":false,"donate":true,"mobileOptionsLink":true,"categories":false,"pageIssues":true,"talkAtTop":false,
"historyInPageActions":false,"overflowSubmenu":false,"tabsOnSpecials":false,"personalMenu":false,"mainMenuExpanded":false,"simplifiedTalk":true},"wgMinervaDownloadNamespaces":[0],"wgSiteNoticeId":"2.0"};RLSTATE={"ext.gadget.enwp-boxes":"ready","site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.discussionTools.init.styles":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready","ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","site","mediawiki.page.ready","skins.minerva.scripts","mobile.init","ext.eventLogging","ext.wikimediaEvents","ext.gadget.site","ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.discussionTools.init.styles%7Cext.dismissableSiteNotice.styles%7Cmediawiki.hlist%7Cmediawiki.ui.button%2Cicon%7Cmobile.init.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.gadget.enwp-boxes&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.39.0-wmf.10"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-crossorigin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0"/>
<meta property="og:title" content="Analytics/Data Lake/Traffic/Unique Devices/Last access solution - Wikitech"/>
<meta property="og:type" content="website"/>
<link rel="preconnect" href="//upload.wikimedia.org"/>
<link rel="manifest" href="/w/api.php?action=webapp-manifest"/>
<link rel="shortcut icon" href="/static/favicon/wikitech.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikitech (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//wikitech.wikimedia.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="canonical" href="https://wikitech.wikimedia.org/wiki/Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution"/>
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Analytics_Data_Lake_Traffic_Unique_Devices_Last_access_solution rootpage-Analytics stable issues-group-B skin-minerva action-view skin--responsive mw-mf-amc-disabled mw-mf"><div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		
		<header class="header-container header-chrome">
			<div class="minerva-header">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-haspopup="true" aria-expanded="false" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button" aria-hidden="true"
						class=" mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="/wiki/Main_Page" class="menu__item--home"
				   data-mw="interface" data-event-name="menu.home">
			      <span class="mw-ui-icon-minerva-home mw-ui-icon"></span><span>Home</span>
			     </a>
			</li>
			<li class="">
			    <a href="/wiki/Special:Random" class="menu__item--random"
				   data-mw="interface" data-event-name="menu.random">
			      <span class="mw-ui-icon-minerva-die mw-ui-icon"></span><span>Random</span>
			     </a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="/w/index.php?title=Special:UserLogin&amp;returnto=Analytics%2FData+Lake%2FTraffic%2FUnique+Devices%2FLast+access+solution" class="menu__item--login"
				   data-mw="interface" data-event-name="menu.login">
			      <span class="mw-ui-icon-minerva-logIn mw-ui-icon"></span><span>Log in</span>
			     </a>
			</li>
	</ul>
	<ul id="p-donation">
			<li class="">
			    <a href="https://donate.wikimedia.org/?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=spontaneous&amp;uselang=en&amp;utm_key=minerva" class=""
				   data-mw="interface" data-event-name="menu.donate">
			      <span class="mw-ui-icon-minerva-heart mw-ui-icon"></span><span>Donate</span>
			     </a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="/wiki/Main_Page" class=""
				   data-mw="interface" data-event-name="">
			      <span>About Wikitech</span>
			     </a>
			</li>
			<li class="">
			    <a href="https://foundation.wikimedia.org/wiki/General_disclaimer" class=""
				   data-mw="interface" data-event-name="">
			      <span>Disclaimers</span>
			     </a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="/wiki/Main_Page">
						<span>
Wikitech
</span>
						
					</a>
				</div>
					<form action="/w/index.php" method="get" class="minerva-search-form">
				<div class="search-box">
					<input type="hidden" name="title" value="Special:Search"/>
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						 type="search" name="search" placeholder="Search Wikitech" aria-label="Search Wikitech" autocapitalize="sentences" title="Search Wikitech [f]" accesskey="f"">
				</div>
				<button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger mw-ui-button mw-ui-quiet">Search</button>
			</form>
		<nav class="minerva-user-navigation" aria-label="User navigation">
					
				</nav>
			</div>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="firstHeading" class="firstHeading mw-first-heading">Analytics/Data Lake/Traffic/Unique Devices/Last access solution</h1>
					<div class="tagline"></div>
				</div>
				<nav class="page-actions-menu">
	<ul id="page-actions" class="page-actions-menu__list">
		<li id="language-selector" class="page-actions-menu__list-item">
				<a id="" href="" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-language-base20 mw-ui-button mw-ui-quiet mw-ui-icon-with-label-desktop mw-ui-button mw-ui-quiet  language-selector disabled"
					data-mw="interface"
					data-event-name="menu.languages" role="button" title="Language">Language</a>
		</li>
		<li id="page-actions-watch" class="page-actions-menu__list-item">
				<a id="ca-watch" href="/w/index.php?title=Special:UserLogin&amp;returnto=Analytics%2FData+Lake%2FTraffic%2FUnique+Devices%2FLast+access+solution" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-star-base20 mw-ui-icon-with-label-desktop watch-this-article mw-ui-button mw-ui-quiet mw-watchlink menu__item--page-actions-watch"
					data-mw="interface"
					data-event-name="menu.watch" role="button" title="Watch">Watch</a>
		</li>
		<li id="page-actions-edit" class="page-actions-menu__list-item">
				<a id="ca-edit" href="/w/index.php?title=Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution&amp;action=edit&amp;section=0" class="edit-page menu__item--page-actions-edit mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-editLock-base20 mw-ui-icon-with-label-desktop mw-ui-button mw-ui-quiet"
					data-mw="interface"
					data-event-name="menu.edit" role="button" title="Edit the lead section of this page">Edit</a>
		</li>
	</ul>
</nav>
<!-- version 1.0.2 (change every time you update a partial) -->
				
				<div class="minerva__subtitle"><span class="subpages">&lt; <a href="/wiki/Analytics" class="mw-redirect" title="Analytics">Analytics</a>&lrm; | <a href="/wiki/Analytics/Data_Lake" title="Analytics/Data Lake">Data Lake</a>&lrm; | <a href="/wiki/Analytics/Data_Lake/Traffic" title="Analytics/Data Lake/Traffic">Traffic</a>&lrm; | <a href="/wiki/Analytics/Data_Lake/Traffic/Unique_Devices" title="Analytics/Data Lake/Traffic/Unique Devices">Unique Devices</a></span><span class="mw-redirectedfrom">(Redirected from <a href="/w/index.php?title=Analytics/Unique_Devices/Last_access_solution&amp;redirect=no" class="mw-redirect" title="Analytics/Unique Devices/Last access solution">Analytics/Unique Devices/Last access solution</a>)</span></div>
			</div>
			<div id="bodyContent" class="content">
				<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><div class="mw-parser-output"><section class="mf-section-0" id="mf-section-0"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul><li class="toclevel-1 tocsection-1"><a href="#Objective"><span class="tocnumber">1</span> <span class="toctext">Objective</span></a>
<ul><li class="toclevel-2 tocsection-2"><a href="#Outcome"><span class="tocnumber">1.1</span> <span class="toctext">Outcome</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-3"><a href="#Caveats"><span class="tocnumber">2</span> <span class="toctext">Caveats</span></a>
<ul><li class="toclevel-2 tocsection-4"><a href="#Bots"><span class="tocnumber">2.1</span> <span class="toctext">Bots</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Redirects"><span class="tocnumber">2.2</span> <span class="toctext">Redirects</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-6"><a href="#Privacy"><span class="tocnumber">3</span> <span class="toctext">Privacy</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Technicalities"><span class="tocnumber">4</span> <span class="toctext">Technicalities</span></a>
<ul><li class="toclevel-2 tocsection-8"><a href="#How_we_are_counting:_Plain_English"><span class="tocnumber">4.1</span> <span class="toctext">How we are counting: Plain English</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#How_we_are_counting:_Technical_explanation"><span class="tocnumber">4.2</span> <span class="toctext">How we are counting: Technical explanation</span></a>
<ul><li class="toclevel-3 tocsection-10"><a href="#Using_the_value_of_the_WMF-Last-Access_cookie"><span class="tocnumber">4.2.1</span> <span class="toctext">Using the value of the WMF-Last-Access cookie</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Nocookie_Offset"><span class="tocnumber">4.2.2</span> <span class="toctext">Nocookie Offset</span></a>
<ul><li class="toclevel-4 tocsection-12"><a href="#How_big_of_a_percentage_does_the_offset_represent_from_the_total?"><span class="tocnumber">4.2.2.1</span> <span class="toctext">How big of a percentage does the offset represent from the total?</span></a></li>
</ul></li>
<li class="toclevel-3 tocsection-13"><a href="#The_redirect_issue_on_unique_device_counts_for_project_families"><span class="tocnumber">4.2.3</span> <span class="toctext">The redirect issue on unique device counts for project families</span></a></li>
</ul></li>
</ul></li>
<li class="toclevel-1 tocsection-14"><a href="#Data_Quality_Analysis"><span class="tocnumber">5</span> <span class="toctext">Data Quality Analysis</span></a>
<ul><li class="toclevel-2 tocsection-15"><a href="#Unique_devices_per-domain"><span class="tocnumber">5.1</span> <span class="toctext"><b>Unique devices per-domain</b></span></a>
<ul><li class="toclevel-3 tocsection-16"><a href="#How_did_we_determined_this_1000_number_for_the_per-domain_uniques"><span class="tocnumber">5.1.1</span> <span class="toctext">How did we determined this 1000 number for the per-domain uniques</span></a></li>
</ul></li>
<li class="toclevel-2 tocsection-17"><a href="#Unique_devices_per_project-family"><span class="tocnumber">5.2</span> <span class="toctext">Unique devices per project-family</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Numbers"><span class="tocnumber">5.3</span> <span class="toctext">Numbers</span></a></li>
</ul></li>
<li class="toclevel-1 tocsection-19"><a href="#More_docs"><span class="tocnumber">6</span> <span class="toctext">More docs</span></a></li>
</ul></div>

</section><h2 class="section-heading" onclick="mfTempOpenSection(1)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="Objective" data-mw-comment='{"type":"heading","level":0,"id":"h-Objective","replies":["h-Outcome-Objective"],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Objective"></span>Objective<span data-mw-comment-end="h-Objective"></span></span></h2><section class="mf-section-1 collapsible-block" id="mf-section-1">
<p>The WMF Analytics Engineering team maintains counts of unique devices per-domain and per project-family, daily and monthly, in a way that does not uniquely identify, fingerprint or otherwise track users.  The outcome is reports on the number of Unique Devices per domain or project for a given month or day.  This is achieved by setting cookies with a Last-Access day on clients and counting sightings of browsers with an old cookie or no cookie at all.
</p>
<h3 class="in-block"><span class="mw-headline" id="Outcome" data-mw-comment='{"type":"heading","level":0,"id":"h-Outcome-Objective","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Outcome-Objective"></span>Outcome<span data-mw-comment-end="h-Outcome-Objective"></span></span></h3>
<p>Reports in the following format:
</p>
<table class="wikitable"><tbody><tr><td>
</td>
<td><b>monthly</b>
</td>
<td><b>daily</b>
</td></tr><tr><td><b>per-domain</b>
</td>
<td>
<table class="wikitable"><tbody><tr><th>Domain
</th>
<th>2016-03
</th>
<th>2016-04
</th>
<th>...
</th></tr><tr><td>en.wikipedia.org
</td>
<td>200,000,000
</td>
<td>210,000,000
</td>
<td>...
</td></tr><tr><td>es.m.wikipedia.org
</td>
<td>20,000,000
</td>
<td>21,000,000
</td>
<td>...
</td></tr><tr><td>en.wikisource.org
</td>
<td>2,000,000
</td>
<td>2,100,000
</td>
<td>...
</td></tr><tr><td>es.wikisource.org
</td>
<td>200,000
</td>
<td>210,000
</td>
<td>...
</td></tr><tr><td>...
</td>
<td>...
</td>
<td>...
</td>
<td>...
</td></tr></tbody></table></td>
<td>
<table class="wikitable"><tbody><tr><th>Domain
</th>
<th>2016-03-01
</th>
<th>2016-03-02
</th>
<th>...
</th></tr><tr><td>en.wikipedia.org
</td>
<td>200,000,000
</td>
<td>210,000,000
</td>
<td>...
</td></tr><tr><td>es.m.wikipedia.org
</td>
<td>20,000,000
</td>
<td>21,000,000
</td>
<td>...
</td></tr><tr><td>en.wikisource.org
</td>
<td>2,000,000
</td>
<td>2,100,000
</td>
<td>...
</td></tr><tr><td>es.wikisource.org
</td>
<td>200,000
</td>
<td>210,000
</td>
<td>...
</td></tr><tr><td>...
</td>
<td>...
</td>
<td>...
</td>
<td>...
</td></tr></tbody></table></td></tr><tr><td><b>project family</b>
</td>
<td>
<table class="wikitable"><tbody><tr><th>Host
</th>
<th>2017-03
</th>
<th>2017-04
</th>
<th>...
</th></tr><tr><td>wikipedia.org
</td>
<td>200,000,000
</td>
<td>210,000,000
</td>
<td>...
</td></tr><tr><td>wikisource.org
</td>
<td>2,000,000
</td>
<td>2,100,000
</td>
<td>...
</td></tr><tr><td>wikivoyage.org
</td>
<td>200,000
</td>
<td>210,000
</td>
<td>...
</td></tr><tr><td>...
</td>
<td>...
</td>
<td>...
</td>
<td>...
</td></tr></tbody></table></td>
<td>
<table class="wikitable"><tbody><tr><th>Host
</th>
<th>2017-03-01
</th>
<th>2017-03-02
</th>
<th>...
</th></tr><tr><td>wikipedia
</td>
<td>200,000,000
</td>
<td>210,000,000
</td>
<td>...
</td></tr><tr><td>wikisource
</td>
<td>2,000,000
</td>
<td>2,100,000
</td>
<td>...
</td></tr><tr><td>wikivoyage
</td>
<td>200,000
</td>
<td>210,000
</td>
<td>...
</td></tr><tr><td>...
</td>
<td>...
</td>
<td>...
</td>
<td>...
</td></tr></tbody></table></td></tr></tbody></table></section><h2 class="section-heading" onclick="mfTempOpenSection(2)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="Caveats" data-mw-comment='{"type":"heading","level":0,"id":"h-Caveats","replies":["h-Bots-Caveats","h-Redirects-Caveats"],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Caveats"></span>Caveats<span data-mw-comment-end="h-Caveats"></span></span></h2><section class="mf-section-2 collapsible-block" id="mf-section-2">
<h3 class="in-block"><span class="mw-headline" id="Bots" data-mw-comment='{"type":"heading","level":0,"id":"h-Bots-Caveats","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Bots-Caveats"></span>Bots<span data-mw-comment-end="h-Bots-Caveats"></span></span></h3>
<p><a href="/wiki/Analytics/Data_Lake/Traffic/Unique_Devices/Automated_traffic_correction" title="Analytics/Data Lake/Traffic/Unique Devices/Automated traffic correction">Analytics/Data_Lake/Traffic/Unique_Devices/Automated_traffic_correction</a>
</p>
<h3 class="in-block"><span class="mw-headline" id="Redirects" data-mw-comment='{"type":"heading","level":0,"id":"h-Redirects-Caveats","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Redirects-Caveats"></span>Redirects<span data-mw-comment-end="h-Redirects-Caveats"></span></span></h3>
<p>Redirects (http response codes <code>301</code>, <code>302 and</code> <code>307</code>) were originally filtered out from the unique devices computation. While this is the case for the per-domain unique devices, they have to be included in the per-project-family computation. See Technicalities/ for more details.
</p>
</section><h2 class="section-heading" onclick="mfTempOpenSection(3)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="Privacy" data-mw-comment='{"type":"heading","level":0,"id":"h-Privacy","replies":[],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Privacy"></span>Privacy<span data-mw-comment-end="h-Privacy"></span></span></h2><section class="mf-section-3 collapsible-block" id="mf-section-3">
<ul><li>Users can delete or refuse cookies</li>
<li>We are not able to identify users from the data passed in the cookie.  The cookie contains only a year, month and day.</li>
<li>We comply with <a class="external text" href="https://meta.wikimedia.org/wiki/Privacy_policy">Wikimedia's Privacy Policy</a></li></ul></section><h2 class="section-heading" onclick="mfTempOpenSection(4)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="Technicalities" data-mw-comment='{"type":"heading","level":0,"id":"h-Technicalities","replies":["h-How_we_are_counting:_Plain_English-Technicalities","h-How_we_are_counting:_Technical_explanation-Technicalities"],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Technicalities"></span>Technicalities<span data-mw-comment-end="h-Technicalities"></span></span></h2><section class="mf-section-4 collapsible-block" id="mf-section-4">
<p>In order to produce the above report these are the cookies we need, each cookie stores last access time per project.
</p>
<ul><li>WMF-Last-Access:</li></ul><pre>&lt;&lt;language&gt;&gt;.m.&lt;&lt;project&gt;&gt;.org
  Mobile site uniques for &lt;&lt;project&gt;&gt; and &lt;&lt;language&gt;&gt;
</pre>
<pre>&lt;&lt;language&gt;&gt;.&lt;&lt;project&gt;&gt;.org
  desktop site uniques for &lt;&lt;project&gt;&gt; and &lt;&lt;language&gt;&gt;
</pre>
<ul><li>WMF-Last-Access-Global:</li></ul><pre>*.&lt;&lt;project&gt;&gt;.org
  Uniques for &lt;&lt;project&gt;&gt; <br></pre>
<h3 class="in-block"><span class="mw-headline" id="How_we_are_counting:_Plain_English" data-mw-comment='{"type":"heading","level":0,"id":"h-How_we_are_counting:_Plain_English-Technicalities","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-How_we_are_counting:_Plain_English-Technicalities"></span>How we are counting: Plain English<span data-mw-comment-end="h-How_we_are_counting:_Plain_English-Technicalities"></span></span></h3>
<p>Unique devices are computing by adding two numbers, one derived from WMF-Last-Access or WMF-Last-Access-Global cookie and an offset. (In the rest of this section, we will use WMF-Last-Access, knowing that the same mechanism applies to WMF-Last-Access-Global.)
</p><p>A very high level explanation of how this works can be found on our blog: <a class="external text" href="https://blog.wikimedia.org/2016/03/30/unique-devices-dataset/">https://blog.wikimedia.org/2016/03/30/unique-devices-dataset/</a>.
</p><p>For a more technical explanation you can keep on reading.
</p>
<h3 class="in-block"><span class="mw-headline" id="How_we_are_counting:_Technical_explanation" data-mw-comment='{"type":"heading","level":0,"id":"h-How_we_are_counting:_Technical_explanation-Technicalities","replies":["h-Using_the_value_of_the_WMF-Last-Access_cookie-How_we_are_counting:_Technical_explanation","h-Nocookie_Offset-How_we_are_counting:_Technical_explanation","h-The_redirect_issue_on_unique_device_counts_for_project_families-How_we_are_counting:_Technical_explanation"],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-How_we_are_counting:_Technical_explanation-Technicalities"></span>How we are counting: Technical explanation<span data-mw-comment-end="h-How_we_are_counting:_Technical_explanation-Technicalities"></span></span></h3>
<h4 class="in-block"><span class="mw-headline" id="Using_the_value_of_the_WMF-Last-Access_cookie" data-mw-comment='{"type":"heading","level":0,"id":"h-Using_the_value_of_the_WMF-Last-Access_cookie-How_we_are_counting:_Technical_explanation","replies":[],"headingLevel":4,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Using_the_value_of_the_WMF-Last-Access_cookie-How_we_are_counting:_Technical_explanation"></span>Using the value of the WMF-Last-Access cookie<span data-mw-comment-end="h-Using_the_value_of_the_WMF-Last-Access_cookie-How_we_are_counting:_Technical_explanation"></span></span></h4>
<p>Inside <a href="/wiki/Varnish" title="Varnish">Varnish</a> we set the cookies and alter the <a href="/wiki/X-Analytics" title="X-Analytics">X-Analytics</a> header. Two possible cases per cookie:
</p><p>1) Request comes in, user does not have a WMF-Last-Access cookie: We issue one with today as last access date, with a future expire time (any expire time over a month will work). Cookie value is "14-Dec-2015" for example. 
</p><p>2) Request comes in, user already has a WMF-Last-Access cookie: We re-issue a new cookie with a future expiration date and set the old date as the value of the cookie in the X-Analytics header. In our prior example, one day has gone by among requests, value of cookie is reset to "15-Dec-2015" and we store the following in the x-analytics header:
</p>
<pre>X-analytics["WMF-Last-Access"] = "14-Dec-2015"
</pre>
<p>In order to count unique devices for say, January, we get from the <a href="/wiki/Analytics/Data/Webrequest" class="mw-redirect" title="Analytics/Data/Webrequest">webrequest</a> table all requests from January that do not have a January date recorded on <code>x-analytics["WMF-Last-Access"]</code> (this includes requests without any Last-Access cookie at all). All those requests are counted toward the January uniques, because that device has not visited in January before (according to the Last-Access cookie).
</p><p>Same logic for daily: to count uniques on December 15th we will get all requests for December 15th that have an <code>X-analytics["WMF-Last-Access"]</code> value with an older date than December 15th. So the request in our example above will be counted. Those are uniques for December 15th.
</p><p>Note that this method of counting assumes that requests come from real users that accept cookies, so we are assuming that if we set a cookie we are going to be able to retrieve it in a subsequent request. This is true only in the case of browser clients that accept cookies. Although while counting we are only looking at traffic tagged as "user" in the cluster, we have to be aware of bots that are not reported as such. In order to discount those requests, we only count requests that have nocookie=0, meaning that those requests came to us with 'some' cookie set. <b>This method of counting, by definition, underreports users as we will not be counting users with a fresh session or users browsing without cookies.</b>
</p><p><br></p>
<h4 class="in-block"><span class="mw-headline" id="Nocookie_Offset" data-mw-comment='{"type":"heading","level":0,"id":"h-Nocookie_Offset-How_we_are_counting:_Technical_explanation","replies":["h-How_big_of_a_percentage_does_the_offset_represent_from_the_total?-Nocookie_Offset"],"headingLevel":4,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Nocookie_Offset-How_we_are_counting:_Technical_explanation"></span>Nocookie Offset<span data-mw-comment-end="h-Nocookie_Offset-How_we_are_counting:_Technical_explanation"></span></span></h4>
<p>Per <a class="external text" href="https://wikitech.wikimedia.org/wiki/X-Analytics">x-analytics documentation</a> every request that comes in without cookies whatsoever is tagged with <code>nocookie=1</code>. Such requests include bots, users browsing with cookies off, and users who just launched a fresh "incognito" session in their browser. We did some research on this, and it turns out that <code>nocookie=1</code> is a cheap proxy to rule out a bunch of what might be bot traffic, see <a href="/wiki/Analytics/Unique_clients/Last_access_solution/BotResearch" class="mw-redirect" title="Analytics/Unique clients/Last access solution/BotResearch">Analytics/Unique_clients/Last_access_solution/BotResearch</a>.
</p><p>When possible, we want to make sure that we count devices that might be coming to Wikipedia with a fresh session without cookies at all. Thus, we also count as uniques requests with <code>nocookie=1</code>  whose signature appears only <b>once</b> in a day or month. The signature is calculated with a hash of (ip, user_agent, accept_language) per project. The idea behind this reasoning is that -if you are a real user- for the day and you did not refresh your browser session, there is only one request you could do without cookies, the 1st one. Subsequent requests will be sending the WMF-Last-Access cookie. 
</p><p>This methodology has two caveats: 
</p>
<ul><li>It underreports fresh sessions in mobile (due to NAT-ing of IP addresses that are shared among many users. see: <a rel="nofollow" class="external autonumber" href="http://serverfault.com/questions/60361/how-are-cellphone-ip-addresses-assigned">[1]</a> and  <a class="external autonumber" href="https://en.wikipedia.org/wiki/Network_address_translation">[2]</a>)</li></ul><ul><li>It will overreport a device in which the IP is changed frequently and/or cookies are deleted frequently as it will appear as two different fresh sessions to our logic. This is less prevalence of an occurrence than the underreport on mobile described prior.</li></ul><p>We add this offset to the numbers that result from looking at WMF-Last-Access cookie.
</p>
<h5 class="in-block"><span id="How_big_of_a_percentage_does_the_offset_represent_from_the_total.3F"></span><span class="mw-headline" id="How_big_of_a_percentage_does_the_offset_represent_from_the_total?" data-mw-comment='{"type":"heading","level":0,"id":"h-How_big_of_a_percentage_does_the_offset_represent_from_the_total?-Nocookie_Offset","replies":[],"headingLevel":5,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-How_big_of_a_percentage_does_the_offset_represent_from_the_total?-Nocookie_Offset"></span>How big of a percentage does the offset represent from the total?<span data-mw-comment-end="h-How_big_of_a_percentage_does_the_offset_represent_from_the_total?-Nocookie_Offset"></span></span></h5>
<p>For projects with more than 100.000 uniques, the offset represents between 5% and 60% of the total if counted daily, variability is high depending on project. The offset represents a smaller percentage on mobile domains, as we know numbers are underreported for fresh sessions in mobile. The offset also represents a higher percentage of monthly numbers, as fresh sessions are likely to be more numerous as we expand our timeperiod for counting them.
</p>
<table><tbody><tr><td><figure class="mw-halign-none" typeof="mw:Image"><a href="/wiki/File:Offsets_percentage_daily.png" class="mw-file-description"><noscript><img alt="Offsets percentage daily.png" src="//upload.wikimedia.org/wikipedia/labs/thumb/e/ef/Offsets_percentage_daily.png/400px-Offsets_percentage_daily.png" decoding="async" width="400" height="300" data-file-width="800" data-file-height="600"></noscript><span class="lazy-image-placeholder" style="width: 400px;height: 300px;" data-src="//upload.wikimedia.org/wikipedia/labs/thumb/e/ef/Offsets_percentage_daily.png/400px-Offsets_percentage_daily.png" data-alt="Offsets percentage daily.png" data-width="400" data-height="300"> </span></a><figcaption></figcaption></figure></td>
<td><figure class="mw-halign-none" typeof="mw:Image"><a href="/wiki/File:Offsets_percentage_monthly.png" class="mw-file-description"><noscript><img alt="Offsets percentage monthly.png" src="//upload.wikimedia.org/wikipedia/labs/thumb/6/6b/Offsets_percentage_monthly.png/400px-Offsets_percentage_monthly.png" decoding="async" width="400" height="300" data-file-width="800" data-file-height="600"></noscript><span class="lazy-image-placeholder" style="width: 400px;height: 300px;" data-src="//upload.wikimedia.org/wikipedia/labs/thumb/6/6b/Offsets_percentage_monthly.png/400px-Offsets_percentage_monthly.png" data-alt="Offsets percentage monthly.png" data-width="400" data-height="300"> </span></a><figcaption></figcaption></figure></td></tr></tbody></table><p><br>
One other thing to keep in mind about the offset is that a high for offset doesn't mean bad quality data. In fact, for project-families having fact-checking mostly usage pattern (wiktionnary is a good example, once every now and then, you get there to check for spelling or existence, but it's not a usual pattern to follow inner-links on wiktionnaries as it is on wikipedias), having (many) more offsets than cookie-based unique devices is expected.
</p>
<h4 class="in-block"><span class="mw-headline" id="The_redirect_issue_on_unique_device_counts_for_project_families" data-mw-comment='{"type":"heading","level":0,"id":"h-The_redirect_issue_on_unique_device_counts_for_project_families-How_we_are_counting:_Technical_explanation","replies":[],"headingLevel":4,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-The_redirect_issue_on_unique_device_counts_for_project_families-How_we_are_counting:_Technical_explanation"></span>The redirect issue on unique device counts for project families<span data-mw-comment-end="h-The_redirect_issue_on_unique_device_counts_for_project_families-How_we_are_counting:_Technical_explanation"></span></span></h4>
<p>When a mobile device  with a fresh session (no cookies) visits the desktop version of one of our projects, for example <code>www.wikidata.org</code>, it gets redirected with a <code>302</code> to the mobile version of the website, here <code>m.wikidata.org</code>. In this transaction two cookies are set:
</p>
<dl><dd>1. Cookie on global domain (*.wikidata.org) when server responds with <code>302</code></dd>
<dd>2. Cookie set on m.wikidata.org on the regular <code>200</code> response from the Wikidata mobile site.</dd></dl><p>Our per-domain computation filters <code>301</code>/<code>302</code> requests (as those are not pageviews). That works well in the per-domain case, as the cookie is set on the <code>200</code> response. But it doesn't work for the global domain uniques calculation, as the cookie is being set "earlier". 
</p><p>In our example, if we filter out redirects for the project-family computation (counting devices on *.wikidata.org) and we only count the <code>200</code> responses (pageviews), we would be missing fresh sessions that exhibit the behaviour described above. In order to solve that issue, in June 2017 we updated the filter for project-family unique devices computation to accept redirects that lead to a pageview (<a href="https://phabricator.wikimedia.org/T167005" class="extiw" title="phab:T167005">phab:T167005</a>).
</p>
</section><h2 class="section-heading" onclick="mfTempOpenSection(5)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="Data_Quality_Analysis" data-mw-comment='{"type":"heading","level":0,"id":"h-Data_Quality_Analysis","replies":["h-Unique_devices_per-domain-Data_Quality_Analysis","h-Unique_devices_per_project-family-Data_Quality_Analysis","h-Numbers-Data_Quality_Analysis"],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Data_Quality_Analysis"></span>Data Quality Analysis<span data-mw-comment-end="h-Data_Quality_Analysis"></span></span></h2><section class="mf-section-5 collapsible-block" id="mf-section-5">
<h3 class="in-block"><span class="mw-headline" id="Unique_devices_per-domain" data-mw-comment='{"type":"heading","level":0,"id":"h-Unique_devices_per-domain-Data_Quality_Analysis","replies":["h-How_did_we_determined_this_1000_number_for_the_per-domain_uniques-Unique_devices_per-domain"],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Unique_devices_per-domain-Data_Quality_Analysis"></span><b>Unique devices per-domain</b><span data-mw-comment-end="h-Unique_devices_per-domain-Data_Quality_Analysis"></span></span></h3>
<p>That is unique devices for en.m.wikimedia.org (mobile site) or en.wikimedia.org (desktop site).
</p>
<pre><b>We recommend that if you are using the unique devices number per domain, you consider domains having at least 1000 unique devices daily (one thousand).</b>  <b>Domains with less than 1000 unique devices show too much random variation for data to be actionable. In other words, data is too noisy if the number of unique devices is less than 1000 daily.</b>
</pre>
<ul><li>Depending on the project family you are looking at (Wikipedia or Wiktionary for instance), it is interesting to keep an eye on the uniques_offset.<b>  </b>For projects where  you can follow links (like wikipedia), uniques_offset is less important, but for projects mostly used for fact checking (wiktionnary for instance), uniques_offset represents a very wider portion of the total uniques.</li>
<li>We also recommend to be very aware of the variability issues when looking at uniques per country (only for WMF employees, or people under NDA) as the variability per host per country is higher than variability per host.</li></ul><h4 class="in-block"><span class="mw-headline" id="How_did_we_determined_this_1000_number_for_the_per-domain_uniques" data-mw-comment='{"type":"heading","level":0,"id":"h-How_did_we_determined_this_1000_number_for_the_per-domain_uniques-Unique_devices_per-domain","replies":[],"headingLevel":4,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-How_did_we_determined_this_1000_number_for_the_per-domain_uniques-Unique_devices_per-domain"></span>How did we determined this 1000 number for the per-domain uniques<span data-mw-comment-end="h-How_did_we_determined_this_1000_number_for_the_per-domain_uniques-Unique_devices_per-domain"></span></span></h4>
<p>We ran an analysis on our daily dataset trying to measure randomness, taking into account the weekly rhythm of our traffic. We took 9 weeks of data, among which one week is taken as reference to compute variation of the eight other weeks day per day per domain. 
</p><p>Example: On Dec 23, a Friday  we compute for es.m.wikipedia how much the number of unique devices we have (say, a 100) differs from the number of unique devices on Friday on reference week (say, 110). If this difference is 10 our variation is 10% or 0.1.  Since we have 8 weeks of data plus one week of reference we have a series of 8 points per day of the week. Given this series we compute the standard deviations of all variations on the 8 week period per domain. Small standard deviations are good, as it means that variation is acceptable, standard deviations &gt;1 mean that data varied more than 100%  from the reference week. We consider that too be too large and a sign that the data is too "noisy". 
</p><p>We also computed, for each project, the median value of unique devices over the 9 weeks of data.
</p><p>This data is plotted below, using log scales.
</p>
<figure class="mw-halign-center" typeof="mw:Image/Thumb"><a href="/wiki/File:Uniques_per_domain-variation_analysis.png" class="mw-file-description"><noscript><img alt="Uniques per domain-variation analysis.png" src="//upload.wikimedia.org/wikipedia/labs/9/98/Uniques_per_domain-variation_analysis.png" decoding="async" width="800" height="500" data-file-width="800" data-file-height="500"></noscript><span class="lazy-image-placeholder" style="width: 800px;height: 500px;" data-src="//upload.wikimedia.org/wikipedia/labs/9/98/Uniques_per_domain-variation_analysis.png" data-alt="Uniques per domain-variation analysis.png" data-width="800" data-height="500"> </span></a><figcaption></figcaption></figure><p>In this chart the red line represents the mean of unique_devices estimate, projects are plotted from higher to lower, that is, the left side of screen has projects like es.wikipedia.org which have millions of users and a variation of less than 0.1 (10%). The right side of the graph plots projects with a small number of uniques, the blue line represents the variation and it can easily be seen how it is a lot higher for those projects, sometimes as high as 100% (a std deviation of 1 in this case).
</p>
<h3 class="in-block"><span class="mw-headline" id="Unique_devices_per_project-family" data-mw-comment='{"type":"heading","level":0,"id":"h-Unique_devices_per_project-family-Data_Quality_Analysis","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Unique_devices_per_project-family-Data_Quality_Analysis"></span>Unique devices per project-family<span data-mw-comment-end="h-Unique_devices_per_project-family-Data_Quality_Analysis"></span></span></h3>
<p>Daily per-project-family unique devices (on *.wikimedia.org for instance) display less variation, in the plot below we can see that standard deviations are a lot lower. In the case of wikipedia.org domain the variability is about 2%. Now, these calculations aggregate results for  a project family (example: *.wikipedia.org). If you are splitting results further (per country, for example) you should take into account that variability will be higher.
</p>
<figure class="mw-halign-center" typeof="mw:Image/Thumb"><a href="/wiki/File:Uniques_project_wide-variation_analysis.png" class="mw-file-description"><noscript><img alt="Uniques project wide-variation analysis.png" src="//upload.wikimedia.org/wikipedia/labs/4/40/Uniques_project_wide-variation_analysis.png" decoding="async" width="800" height="500" data-file-width="800" data-file-height="500"></noscript><span class="lazy-image-placeholder" style="width: 800px;height: 500px;" data-src="//upload.wikimedia.org/wikipedia/labs/4/40/Uniques_project_wide-variation_analysis.png" data-alt="Uniques project wide-variation analysis.png" data-width="800" data-height="500"> </span></a><figcaption></figcaption></figure><h3 class="in-block"><span class="mw-headline" id="Numbers" data-mw-comment='{"type":"heading","level":0,"id":"h-Numbers-Data_Quality_Analysis","replies":[],"headingLevel":3,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-Numbers-Data_Quality_Analysis"></span>Numbers<span data-mw-comment-end="h-Numbers-Data_Quality_Analysis"></span></span></h3>
<p>Variation calculations are done with data from March and April 2017, week of reference being from March 1st to March 7th. 
</p><p>Remember that the standard deviation is computed on a variation, meaning a value of 0.02 is actually a variation of 2% of the total number of uniques. 
</p>
<table class="wikitable sortable" style="text-align:right;"><tbody><tr><th style="text-align:center;">Host
</th>
<th style="text-align:center;">Standard deviation
</th>
<th style="text-align:center;">Median
</th>
<th style="text-align:center;">Total uniques estimate
</th></tr><tr><td style="text-align:left;">wikipedia
</td>
<td>0.023682
</td>
<td>139541265.0
</td>
<td>6892468332
</td></tr><tr><td style="text-align:left;">wiktionary
</td>
<td>0.044993
</td>
<td>2065876.0
</td>
<td>101815953
</td></tr><tr><td style="text-align:left;">wikimedia
</td>
<td>0.511323
</td>
<td>737828.0
</td>
<td>37875366
</td></tr><tr><td style="text-align:left;">wikibooks
</td>
<td>0.059730
</td>
<td>486944.0
</td>
<td>23910646
</td></tr><tr><td style="text-align:left;">wikiquote
</td>
<td>0.064770
</td>
<td>371341.0
</td>
<td>18325283
</td></tr><tr><td style="text-align:left;">wikisource
</td>
<td>0.051465
</td>
<td>304530.5
</td>
<td>15110349
</td></tr><tr><td style="text-align:left;">wikiversity
</td>
<td>0.092480
</td>
<td>85188.0
</td>
<td>4190639
</td></tr><tr><td style="text-align:left;">wikidata
</td>
<td>0.051855
</td>
<td>67684.5
</td>
<td>3361208
</td></tr><tr><td style="text-align:left;">wikivoyage
</td>
<td>0.067449
</td>
<td>58717.0
</td>
<td>2926678
</td></tr><tr><td style="text-align:left;">wikimediafoundation
</td>
<td>0.145124
</td>
<td>40250.0
</td>
<td>2067248
</td></tr><tr><td style="text-align:left;">mediawiki
</td>
<td>0.115052
</td>
<td>28805.5
</td>
<td>1325261
</td></tr><tr><td style="text-align:left;">wikinews
</td>
<td>0.275252
</td>
<td>17114.0
</td>
<td>873688
</td></tr></tbody></table></section><h2 class="section-heading" onclick="mfTempOpenSection(6)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left mw-ui-button mw-ui-quiet"></div><span class="mw-headline" id="More_docs" data-mw-comment='{"type":"heading","level":0,"id":"h-More_docs","replies":[],"headingLevel":2,"placeholderHeading":false,"name":"h-"}'><span data-mw-comment-start="" id="h-More_docs"></span>More docs<span data-mw-comment-end="h-More_docs"></span></span></h2><section class="mf-section-6 collapsible-block" id="mf-section-6">
<ul><li>15 min tech talk (minute 19th): <a rel="nofollow" class="external autonumber" href="https://www.youtube.com/watch?v=D3fyCgBWvFc#t=19m">[3]</a> and slides: <a class="external autonumber" href="https://commons.wikimedia.org/wiki/File:Unique_devices_lightning_talk.pdf">[4]</a></li>
<li>The actual queries used to calculate the daily and monthly numbers from the webrequest table:
<ul><li>per domain: <a rel="nofollow" class="external text" href="https://github.com/wikimedia/analytics-refinery/blob/master/oozie/unique_devices/per_domain/daily/unique_devices_per_domain_daily.hql">daily</a> / <a rel="nofollow" class="external text" href="https://github.com/wikimedia/analytics-refinery/blob/master/oozie/unique_devices/per_domain/monthly/unique_devices_per_domain_monthly.hql">monthly</a></li>
<li>per project family: <a rel="nofollow" class="external text" href="https://github.com/wikimedia/analytics-refinery/blob/master/oozie/unique_devices/per_project_family/daily/unique_devices_per_project_family_daily.hql">daily</a> / <a rel="nofollow" class="external text" href="https://github.com/wikimedia/analytics-refinery/blob/master/oozie/unique_devices/per_project_family/monthly/unique_devices_per_project_family_monthly.hql">monthly</a></li></ul></li>
<li><a rel="nofollow" class="external text" href="https://github.com/wikimedia/puppet/blob/production/modules/varnish/templates/analytics.inc.vcl.erb">Varnish VCL code for the WMF-Last-Access Cookie</a></li></ul><!-- 
NewPP limit report
Parsed by labweb1001
Cached time: 20220422141319
Cache expiry: 1814400
Reduced expiry: false
Complications: []
DiscussionTools time usage: 0.020 seconds
CPU time usage: 0.055 seconds
Real time usage: 0.059 seconds
Preprocessor visited node count: 66/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
--><!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
--><!-- Saved in parser cache with key labswiki:pcache:idhash:20878-0!canonical!responsiveimages=0 and timestamp 20220422141319 and revision id 1872699. Serialized with JSON.
 --></section></div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution&amp;oldid=1872699">https://wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution&amp;oldid=1872699</a>"</div></div>
				
			</div>
			<div class="post-content" id="page-secondary-actions">
			</div>
		</main>
		<footer class="mw-footer minerva-footer" role="contentinfo">
		  <a class="last-modified-bar" href="/wiki/Special:History/Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution">
  	<div class="post-content last-modified-bar__content">
  		<span class="last-modified-bar__icon mw-ui-icon mw-ui-icon-mw-ui-icon-small mw-ui-icon-wikimedia-history-base20 "></span>
  		<span class="last-modified-bar__text modified-enhancement"
  				data-user-name="Nuria"
  				data-user-gender="unknown"
  				data-timestamp="1594148655">
  				<span>Last edited on 7 July 2020, at 19:04</span>
  		</span>
  		<span class="mw-ui-icon mw-ui-icon-small mw-ui-icon-mf-expand-gray mf-mw-ui-icon-rotate-anti-clockwise indicator"></span>
  	</div>
  </a>
	<div class="post-content footer-content">
			
			<div class="minerva-footer-logo">
Wikitech
</div>
			<ul id="footer-info" class="footer-info hlist hlist-separated">
	<li id="footer-info-lastmod"> This page was last edited on 7 July 2020, at 19:04.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a> unless otherwise noted.</li>
</ul>

			<ul id="footer-places" class="footer-places hlist hlist-separated">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/Main_Page" title="Main Page">About Wikitech</a></li>
	<li id="footer-places-disclaimer"><a href="https://foundation.wikimedia.org/wiki/General_disclaimer" class="extiw" title="wikimedia:General disclaimer">Disclaimers</a></li>
	<li id="footer-places-wm-codeofconduct"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Code_of_Conduct">Code of Conduct</a></li>
	<li id="footer-places-terms-use"><a href="https://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a></li>
	<li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="//wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Unique_Devices/Last_access_solution&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/wikitech.wikimedia.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement">Cookie statement</a></li>
</ul>

			</div>
		</footer>
			</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.1 -->
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"discussiontools":{"limitreport-timeusage":"0.020"},"limitreport":{"cputime":"0.055","walltime":"0.059","ppvisitednodes":{"value":66,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":500},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"origin":"labweb1001","timestamp":"20220422141319","ttl":1814400,"transientcontent":false}}});});</script>
<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script><script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":118,"wgHostname":"labweb1002"});});</script>
</body>
</html>