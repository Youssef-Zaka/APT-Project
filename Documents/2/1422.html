<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Analytics/Systems/Jupyter - Wikitech</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"e8ece253-25b1-4aac-852f-56f4a7e08621","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Analytics/Systems/Jupyter","wgTitle":"Analytics/Systems/Jupyter","wgCurRevisionId":1948908,"wgRevisionId":1948908,"wgArticleId":447004,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Analytics/Systems/Jupyter","wgRelevantArticleId":447004,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":
"SWAP","wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":10000,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgULSCurrentAutonym":"English","wgInternalRedirectTargetUrl":"/wiki/Analytics/Systems/Jupyter","wgEditSubmitButtonLabelPublish":true,"wgDiscussionToolsFeaturesEnabled":{"replytool":true,"newtopictool":false,"sourcemodetoolbar":true,"topicsubscription":false,"autotopicsub":false},"wgDiscussionToolsFallbackEditMode":"visual","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgSiteNoticeId":"2.0"};RLSTATE={"ext.gadget.enwp-boxes":"ready","site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","ext.discussionTools.init.styles":"ready","skins.vector.styles.legacy":"ready",
"ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.uls.pt":"ready","ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.eventLogging","ext.wikimediaEvents","ext.gadget.site","ext.discussionTools.init","ext.uls.compactlinks","ext.uls.interface","ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.discussionTools.init.styles%7Cext.dismissableSiteNotice.styles%7Cext.pygments%7Cext.uls.pt%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.gadget.enwp-boxes&amp;only=styles&amp;skin=vector"/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.0-wmf.10"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-crossorigin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta property="og:title" content="Analytics/Systems/Jupyter - Wikitech"/>
<meta property="og:type" content="website"/>
<link rel="shortcut icon" href="/static/favicon/wikitech.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikitech (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//wikitech.wikimedia.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Wikitech Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="https://wikitech.wikimedia.org/wiki/Analytics/Systems/Jupyter"/>
</head>
<body class="ext-discussiontools-replytool-enabled ext-discussiontools-sourcemodetoolbar-enabled mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Analytics_Systems_Jupyter rootpage-Analytics skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"><div id="mw-dismissablenotice-anonplace"></div><script>(function(){var node=document.getElementById("mw-dismissablenotice-anonplace");if(node){node.outerHTML="\u003Cdiv class=\"mw-dismissable-notice\"\u003E\u003Cdiv class=\"mw-dismissable-notice-close\"\u003E[\u003Ca tabindex=\"0\" role=\"button\"\u003Edismiss\u003C/a\u003E]\u003C/div\u003E\u003Cdiv class=\"mw-dismissable-notice-body\"\u003E\u003Cdiv id=\"localNotice\"\u003E\u003Cdiv class=\"sitenotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Cdiv class=\"center\"\u003E\u003Ca href=\"https://www.mediawiki.org/wiki/Wikimedia_Hackathon_2022\" class=\"extiw\" title=\"mw:Wikimedia Hackathon 2022\"\u003EWikimedia Hackathon 2022\u003C/a\u003E will be held \u003Ci\u003Eonline\u003C/i\u003E May 20-22, 2022.\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E";}}());</script></div>
	<div class="mw-indicators">
	<div id="mw-indicator-phabricator-project" class="mw-indicator"><div class="mw-parser-output"><style data-mw-deduplicate="TemplateStyles:r1926562">.mw-parser-output .tpl-badge{background-color:#eaf3ff;border-radius:10px;display:inline-block;font-size:90%;padding:5px 8px}</style><div class="tpl-badge"><a href="/wiki/Phabricator" title="Phabricator">Phabricator</a> project: <a href="https://phabricator.wikimedia.org/tag/analytics-jupyter/" class="extiw" title="phab:tag/analytics-jupyter/"><b>#Analytics-Jupyter</b></a></div></div></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Analytics/Systems/Jupyter</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Wikitech</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="/wiki/Analytics" class="mw-redirect" title="Analytics">Analytics</a>&lrm; | <a href="/wiki/Analytics/Systems" title="Analytics/Systems">Systems</a></span><span class="mw-redirectedfrom">(Redirected from <a href="/w/index.php?title=SWAP&amp;redirect=no" class="mw-redirect" title="SWAP">SWAP</a>)</span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p><br/>
The <a href="/wiki/Analytics/Systems/Clients" title="Analytics/Systems/Clients">analytics clients</a> include a hosted version
<a rel="nofollow" class="external text" href="https://jupyter.org/hub">JupyterHub</a>, allowing access to <a href="/wiki/Analytics/Data_access" title="Analytics/Data access">internal data</a>
with <a rel="nofollow" class="external text" href="https://jupyter.org/index.html">Jupyter</a> Notebooks.
</p><p><br/>
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Access"><span class="tocnumber">2</span> <span class="toctext">Access</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Authenticate_to_Hadoop_via_Kerberos"><span class="tocnumber">2.1</span> <span class="toctext">Authenticate to Hadoop via Kerberos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Querying_Analytics_Cluster_Datasets"><span class="tocnumber">3</span> <span class="toctext">Querying Analytics Cluster Datasets</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#PySpark_and_wmfdata"><span class="tocnumber">3.1</span> <span class="toctext">PySpark and wmfdata</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Scala-Spark_or_Spark-SQL_using_Toree"><span class="tocnumber">3.2</span> <span class="toctext">Scala-Spark or Spark-SQL using Toree</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Conda_environments"><span class="tocnumber">4</span> <span class="toctext">Conda environments</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Using_multiple_Conda_environments"><span class="tocnumber">4.1</span> <span class="toctext">Using multiple Conda environments</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Troubleshooting"><span class="tocnumber">5</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#pip_fails_to_install_a_newer_version_of_a_package"><span class="tocnumber">5.1</span> <span class="toctext">pip fails to install a newer version of a package</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Trouble_installing_R_packages"><span class="tocnumber">5.2</span> <span class="toctext">Trouble installing R packages</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Browser_disconnects"><span class="tocnumber">5.3</span> <span class="toctext">Browser disconnects</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#My_Python_notebook_will_not_start"><span class="tocnumber">5.4</span> <span class="toctext">My Python notebook will not start</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#My_kernel_restarts_when_I_run_a_large_query"><span class="tocnumber">5.5</span> <span class="toctext">My kernel restarts when I run a large query</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Viewing_Jupyter_Notebook_Server_logs"><span class="tocnumber">5.6</span> <span class="toctext">Viewing Jupyter Notebook Server logs</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Viewing_JupyterHub_logs"><span class="tocnumber">5.7</span> <span class="toctext">Viewing JupyterHub logs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Tips"><span class="tocnumber">6</span> <span class="toctext">Tips</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Administration"><span class="tocnumber">7</span> <span class="toctext">Administration</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Overview&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Overview"></span>Overview<span data-mw-comment-end="h-Overview"></span></span></h2>
<p>JupyterHub is a multi-tenant Jupyter Notebook Server launcher.  It runs on each of the analytics
clients (AKA stat boxes).  Users open ssh tunnels to the JupyterHub service, open a browser
and log in, choose or create a <a rel="nofollow" class="external text" href="https://docs.conda.io/en/latest/">Conda</a> environment from which to run their Jupyter Notebook Server.
</p>
<h2><span class="mw-headline" id="Access" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Access&quot;,&quot;replies&quot;:[&quot;h-Authenticate_to_Hadoop_via_Kerberos-Access&quot;],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Access"></span>Access<span data-mw-comment-end="h-Access"></span></span></h2>
<p>To access JupyterHub, you need:
</p>
<ul><li><a href="/wiki/Analytics/Data_access#ssh_login_to_analytics_client_servers_(AKA_stat_boxes)_with_Hadoop,_Hive,_Presto_access" title="Analytics/Data access">production data access</a> in the <tt>analytics-privatedata-users</tt> POSIX group with Kerberos.</li>
<li>Your <a href="/wiki/Production_shell_access#SSH_configuration" class="mw-redirect" title="Production shell access">SSH configured correctly</a>.</li>
<li>You'll also need to be in the <code>wmf</code> or <code>nda</code> <a href="/wiki/Analytics/Data_access#LDAP_access" title="Analytics/Data access">LDAP groups</a>.</li></ul>
<p>Once you have this access, open a SSH tunnel to one of the
<a href="/wiki/Analytics/Systems/Clients" title="Analytics/Systems/Clients">analytics clients</a>, e.g.
</p>
<pre> ssh -N stat1005.eqiad.wmnet -L 8880:127.0.0.1:8880
</pre>
<p>replacing <code>stat1005</code> with the name of any analytics client hostname (AKA stat box)
if you prefer.
</p><p>Then, open <a rel="nofollow" class="external text" href="http://localhost:8880">localhost:8880</a> in your browser and log in with your
shell username and LDAP password.  You'll be prompted to select
or create a Conda environment.  See the section on
<a href="/wiki/Analytics/Systems/Jupyter#Conda_environments" title="Analytics/Systems/Jupyter">Conda environments</a> below.
</p><p>Note that this will give you access to your Jupyter Notebook Server on the chosen analytics client
host only.  Notebooks and files are saved to your home directory on that host. If you need shared
access to files, consider putting those files in HDFS.
</p>
<h3><span class="mw-headline" id="Authenticate_to_Hadoop_via_Kerberos" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Authenticate_to_Hadoop_via_Kerberos-Access&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Authenticate_to_Hadoop_via_Kerberos-Access"></span>Authenticate to Hadoop via Kerberos<span data-mw-comment-end="h-Authenticate_to_Hadoop_via_Kerberos-Access"></span></span></h3>
<p>Once you've logged in, if you want to access data from <a href="/wiki/Analytics/Systems/Cluster/Hadoop" title="Analytics/Systems/Cluster/Hadoop">Hadoop</a>,
you will need to authenticate with <a href="/wiki/Analytics/Systems/Kerberos/UserGuide" title="Analytics/Systems/Kerberos/UserGuide">Kerberos</a>.
</p><p>This can be done either via a terminal ssh session or in a Jupyter Terminal Notebook.
</p><p>In a terminal session, just type
</p>
<pre> kinit
</pre>
<p>You'll be prompted for your Kerberos password.
</p>
<h2><span class="mw-headline" id="Querying_Analytics_Cluster_Datasets" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Querying_Analytics_Cluster_Datasets&quot;,&quot;replies&quot;:[&quot;h-PySpark_and_wmfdata-Querying_Analytics_Cluster_Datasets&quot;,&quot;h-Scala-Spark_or_Spark-SQL_using_Toree-Querying_Analytics_Cluster_Datasets&quot;],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Querying_Analytics_Cluster_Datasets"></span>Querying Analytics Cluster Datasets<span data-mw-comment-end="h-Querying_Analytics_Cluster_Datasets"></span></span></h2>
<p>The <a href="https://www.mediawiki.org/wiki/Product_Analytics" class="extiw" title="mw:Product Analytics">Product Analytics team</a> maintains software packages to make accessing data from the analytics clients as easy as possible by hard-coding all the setup and configuration.
</p><p>For Python, there is <a rel="nofollow" class="external text" href="https://github.com/wikimedia/wmfdata-python">wmfdata-python</a>. It can access data through <a href="/wiki/Analytics/Systems/MariaDB" title="Analytics/Systems/MariaDB">MariaDB</a>, <a href="/wiki/Analytics/Systems/Cluster/Hive" title="Analytics/Systems/Cluster/Hive">Hive</a>, <a href="/wiki/Analytics/Systems/Presto" title="Analytics/Systems/Presto">Presto</a>, and <a href="/wiki/Analytics/Systems/Cluster/Spark" title="Analytics/Systems/Cluster/Spark">Spark</a> and has a number of other useful functions, like creating SparkSessions (see below).
</p><p>For more advanced usage, see <a href="/wiki/Analytics/Systems/Jupyter/Tips#Custom_PySpark_Notebook_Kernels" title="Analytics/Systems/Jupyter/Tips">Analytics/Systems/Jupyter/Tips#Custom_PySpark_Notebook_Kernels</a>
</p><p>For R, there is <a rel="nofollow" class="external text" href="https://github.com/wikimedia/wmfdata-r">wmfdata-r</a>. It can access data from <a href="/wiki/Analytics/Systems/MariaDB" title="Analytics/Systems/MariaDB">MariaDB</a> and <a href="/wiki/Analytics/Systems/Cluster/Hive" title="Analytics/Systems/Cluster/Hive">Hive</a> and has many other useful functions, particularly for graphing and statistics.
</p><p>For Scala-Spark  and Spark-SQL, you need to install your own kernels in your Conda environment and use  <a rel="nofollow" class="external text" href="https://toree.apache.org/">Apache Toree</a> (see below).  NOTE: Toree is a relatively inactive project.
</p>
<h3><span class="mw-headline" id="PySpark_and_wmfdata" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-PySpark_and_wmfdata-Querying_Analytics_Cluster_Datasets&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-PySpark_and_wmfdata-Querying_Analytics_Cluster_Datasets"></span>PySpark and wmfdata<span data-mw-comment-end="h-PySpark_and_wmfdata-Querying_Analytics_Cluster_Datasets"></span></span></h3>
<p>It is possible to create and use a custom Jupyter Notebook kernel to instantiate a PySpark session.
However, predefined kernels must specify all possible options to Spark, making it impossible to
customize a SparkSession to your needs.  Instead, it is recommended to use a regular Python
Notebook, and use either <a rel="nofollow" class="external text" href="https://github.com/wikimedia/wmfdata-python">wmfdata-python</a>
or the <a rel="nofollow" class="external text" href="https://github.com/minrk/findspark">findspark</a> package to instantiate your Python
SparkSession.
</p><p>wmfdata has a simplified Spark <code>run</code> function that allows you to quickly run
SQL to access data in Hive via Spark as a Pandas DataFrame.
</p>
<div class="mw-highlight mw-highlight-lang-python3 mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">wmfdata</span>

<span class="n">pandas_df</span> <span class="o">=</span> <span class="n">wmfdata</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="sd">"""</span>
<span class="sd">    SELECT meta.domain, count(*)</span>
<span class="sd">    FROM event.mediawiki_page_create</span>
<span class="sd">    WHERE year=2022 AND month=1 AND day=1 and hour=0</span>
<span class="sd">    GROUP BY meta.domain</span>
<span class="sd">    ORDER BY count(*) DESC</span>
<span class="sd">    LIMIT 10</span>
<span class="sd">    """</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pandas_df</span><span class="p">)</span>

<span class="n">domain</span>  <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">0</span>  <span class="n">commons</span><span class="o">.</span><span class="n">wikimedia</span><span class="o">.</span><span class="n">org</span>      <span class="mi">1491</span>
<span class="mi">1</span>       <span class="n">en</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>       <span class="mi">308</span>
<span class="mi">2</span>      <span class="n">mg</span><span class="o">.</span><span class="n">wiktionary</span><span class="o">.</span><span class="n">org</span>       <span class="mi">209</span>
<span class="mi">3</span>       <span class="n">www</span><span class="o">.</span><span class="n">wikidata</span><span class="o">.</span><span class="n">org</span>       <span class="mi">126</span>
<span class="mi">4</span>       <span class="n">fr</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>       <span class="mi">117</span>
<span class="mi">5</span>      <span class="n">uk</span><span class="o">.</span><span class="n">wikisource</span><span class="o">.</span><span class="n">org</span>        <span class="mi">87</span>
<span class="mi">6</span>       <span class="n">ar</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>        <span class="mi">61</span>
<span class="mi">7</span>       <span class="n">ur</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>        <span class="mi">56</span>
<span class="mi">8</span>       <span class="n">pl</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>        <span class="mi">36</span>
<span class="mi">9</span>      <span class="n">hyw</span><span class="o">.</span><span class="n">wikipedia</span><span class="o">.</span><span class="n">org</span>        <span class="mi">32</span>
</pre></div>
<p>The <code>run</code> function
should only be used with smallish result sets, as it pulls all results into memory in the
Jupyter Notebook server.
</p><p>You can also just instantiate a SparkSession and use it directly.
</p>
<div class="mw-highlight mw-highlight-lang-python3 mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">wmfdata</span>

<span class="c1"># Get a predefined and preconfigured SparkSession type using get_session.</span>
<span class="n">spark</span> <span class="o">=</span> <span class="n">wmfdata</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">get_session</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">'yarn-regular'</span><span class="p">)</span>

<span class="c1"># Or get a totally customizable SparkSession using get_spark_session.</span>
<span class="n">spark</span> <span class="o">=</span> <span class="n">wmfdata</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">get_spark_session</span><span class="p">(</span>
    <span class="n">master</span><span class="o">=</span><span class="s1">'yarn'</span><span class="p">,</span>
    <span class="n">spark_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">'spark.executor.memory'</span><span class="p">:</span> <span class="s1">'4g'</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># If you have locally installed dependencies that you need on remote YARN Spark executors,</span>
<span class="c1"># wmfdata.spark.get_session and wmfdata.spark.get_custom_session</span>
<span class="c1"># have a ship_python_env options, which will automatically</span>
<span class="c1"># pack and ship your current conda environment to the remote executor,</span>
<span class="c1"># and cause it to use python and the dependencies from it.</span>
<span class="n">spark</span> <span class="o">=</span> <span class="n">wmfdata</span><span class="o">.</span><span class="n">spark</span><span class="o">.</span><span class="n">get_spark_session</span><span class="p">(</span>
    <span class="n">master</span><span class="o">=</span><span class="s1">'yarn'</span><span class="p">,</span>
    <span class="n">ship_python_env</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
<p>By default, Yarn based SparkSessions used by <code>run</code> will timeout
after 5 minutes of inactivity.
</p><p>Also note that you can only have one active SparkSession instance per notebook at a time.
Provided  parameters will only be applied the first time the SparkSession is instaniated. 
Subsequent calls with different configuration parameters will not result in a modified
SparkSession, unless the SparkSession is first stopped (or has timed-out).
</p>
<h3><span class="mw-headline" id="Scala-Spark_or_Spark-SQL_using_Toree" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Scala-Spark_or_Spark-SQL_using_Toree-Querying_Analytics_Cluster_Datasets&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Scala-Spark_or_Spark-SQL_using_Toree-Querying_Analytics_Cluster_Datasets"></span>Scala-Spark or Spark-SQL using Toree<span data-mw-comment-end="h-Scala-Spark_or_Spark-SQL_using_Toree-Querying_Analytics_Cluster_Datasets"></span></span></h3>
<p>To use either Scala-Spark or Spark-SQL notebooks you need to have <a rel="nofollow" class="external text" href="https://toree.apache.org/">Apache Toree</a> available in your conda environment.
</p><p>An easy way to do so is to install it via the notebook terminal interface: In your notebook interface, click <code>New -> terminal</code> , and in the terminal type <code>pip install toree</code>. And that's it :)
</p><p>Now you can create a jupyter kernel using Toree as a gateway between the notebook and a spark session running on the cluster (note: the spark session is managed by Toree, no need to create it manually).
</p><p>To create both a Scala-spark and Spark-SQL kernels, in your notebook terminal again :
</p><p>
NOTE: {lease change the kernel name and the spark options as you see fit - you can find the default wmfdata spark parameters <a rel="nofollow" class="external text" href="https://github.com/wikimedia/wmfdata-python/blob/master/wmfdata/spark.py#L23">on this github page</a>.</p><div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>jupyter toree install <span class="se">\</span>
    --user <span class="se">\</span>
    --spark_home<span class="o">=</span><span class="s2">"/usr/lib/spark2/"</span> <span class="se">\</span>
    --interpreters<span class="o">=</span>Scala,SQL <span class="se">\</span>
    --kernel_name<span class="o">=</span><span class="s2">"Scala Spark"</span> <span class="se">\</span>
    --spark_opts<span class="o">=</span><span class="s2">"--master yarn --driver-memory 2G --executor-memory 8G --executor-cores 4 --conf spark.dynamicAllocation.maxExecutors=64 --conf spark.sql.shuffle.partitions=256"</span>
</pre></div>
<h2><span class="mw-headline" id="Conda_environments" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Conda_environments&quot;,&quot;replies&quot;:[&quot;h-Using_multiple_Conda_environments-Conda_environments&quot;],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Conda_environments"></span>Conda environments<span data-mw-comment-end="h-Conda_environments"></span></span></h2>
<p>Your Jupyter Notebook Server is run out of a Conda environment which is 'stacked' on top of
a read only distribution of Anaconda, named anaconda-wmf.  anaconda-wmf has a large <a rel="nofollow" class="external text" href="https://docs.anaconda.com/anaconda/packages/py3.7_linux-64/">list of packages</a> already installed, and these packages are installed on all Hadoop worker nodes.
</p><p>After logging into JupyterHub, when you start Jupyter Notebook Server it is launched out of your Conda environment stacked on anaconda-wmf.  This means that the packages in anaconda-wmf are available to import in your python notebooks.  If you need different or newer versions of packages, you can <tt>conda</tt> (preferred) or <tt>pip</tt>   install them into your active Conda environment, and they will be imported from there.
</p>
<h3><span class="mw-headline" id="Using_multiple_Conda_environments" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Using_multiple_Conda_environments-Conda_environments&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Using_multiple_Conda_environments-Conda_environments"></span>Using multiple Conda environments<span data-mw-comment-end="h-Using_multiple_Conda_environments-Conda_environments"></span></span></h3>
<p>You can create as many Conda environments as you
might need, but you can only run one Jupyter Notebook Server at a time.
This means that you can only use one Conda environment in a Jupyter Notebook Server at a time.
To use a Jupyter Notebook Server with a different Conda environment, you can stop your
Jupyter Notebook Server from the <a rel="nofollow" class="external text" href="http://localhost:8880/hub/home">JupyterHub Control Panel</a>,
and start a new server and select a different Conda environment for it to use.
</p><p>These Conda environments may also be used outside of Jupyter on the CLI.
</p><p>See <a href="/wiki/Analytics/Systems/Anaconda" title="Analytics/Systems/Anaconda">Analytics/Systems/Anaconda</a> for more information.
</p>
<h2><span class="mw-headline" id="Troubleshooting" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Troubleshooting&quot;,&quot;replies&quot;:[&quot;h-pip_fails_to_install_a_newer_version_of_a_package-Troubleshooting&quot;,&quot;h-Trouble_installing_R_packages-Troubleshooting&quot;,&quot;h-Browser_disconnects-Troubleshooting&quot;,&quot;h-My_Python_notebook_will_not_start-Troubleshooting&quot;,&quot;h-My_kernel_restarts_when_I_run_a_large_query-Troubleshooting&quot;,&quot;h-Viewing_Jupyter_Notebook_Server_logs-Troubleshooting&quot;,&quot;h-Viewing_JupyterHub_logs-Troubleshooting&quot;],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Troubleshooting"></span>Troubleshooting<span data-mw-comment-end="h-Troubleshooting"></span></span></h2>
<h3><span class="mw-headline" id="pip_fails_to_install_a_newer_version_of_a_package" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-pip_fails_to_install_a_newer_version_of_a_package-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-pip_fails_to_install_a_newer_version_of_a_package-Troubleshooting"></span>pip fails to install a newer version of a package<span data-mw-comment-end="h-pip_fails_to_install_a_newer_version_of_a_package-Troubleshooting"></span></span></h3>
<p>If using pip to install a package into your conda environment that already exists in the base anaconda-wmf environment, you might get an error like:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>  Attempting uninstall: wmfdata
    Found existing installation: wmfdata <span class="m">1</span>.0.4
    Uninstalling wmfdata-1.0.4:
ERROR: Could not install packages due to an EnvironmentError: <span class="o">[</span>Errno <span class="m">30</span><span class="o">]</span> Read-only file system: <span class="s1">'WHEEL'</span>
</pre></div>
<p>To work around this, tell pip to <code>--ignore-installed</code> when running <code>pip install</code>, like:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>pip install --ignore-installed --upgrade git+https://github.com/wikimedia/wmfdata-python.git@release
</pre></div>
<p>See also: <a href="/wiki/Analytics/Systems/Anaconda#Installing_packages_into_your_user_conda_environment" title="Analytics/Systems/Anaconda">Analytics/Systems/Anaconda#Installing_packages_into_your_user_conda_environment</a>
</p>
<h3><span class="mw-headline" id="Trouble_installing_R_packages" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Trouble_installing_R_packages-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Trouble_installing_R_packages-Troubleshooting"></span>Trouble installing R packages<span data-mw-comment-end="h-Trouble_installing_R_packages-Troubleshooting"></span></span></h3>
<p>See <a href="/wiki/Analytics/Systems/Anaconda#R_support" title="Analytics/Systems/Anaconda">Analytics/Systems/Anaconda#R_support</a>
</p>
<h3><span class="mw-headline" id="Browser_disconnects" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Browser_disconnects-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Browser_disconnects-Troubleshooting"></span>Browser disconnects<span data-mw-comment-end="h-Browser_disconnects-Troubleshooting"></span></span></h3>
<p>If your browser session disconnects from the kernel on the server (if, for example, your SSH
connection times out), any work the kernel is doing will continue, and you'll be able to access
the results the next time you connect to the kernel, but no further display output for that work
(like <code>print()</code> commands to log progress) will accumulate, even if you reopen the
notebook (<a rel="nofollow" class="external text" href="https://github.com/jupyterlab/jupyterlab/issues/4237">JupyterLab issue 4237</a>).
</p>
<h3><span class="mw-headline" id="My_Python_notebook_will_not_start" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-My_Python_notebook_will_not_start-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-My_Python_notebook_will_not_start-Troubleshooting"></span>My Python notebook will not start<span data-mw-comment-end="h-My_Python_notebook_will_not_start-Troubleshooting"></span></span></h3>
<p>Your <a rel="nofollow" class="external text" href="http://ipython.readthedocs.io/en/stable/config/intro.html">IPython configuration</a> may be broken.
Try  deleting your <code>~/.ipython</code> directory (you'll lose any configurations you've made or
extensions you've installed, but it won't affect your notebooks, files, or Python packages).
</p>
<h3><span class="mw-headline" id="My_kernel_restarts_when_I_run_a_large_query" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-My_kernel_restarts_when_I_run_a_large_query-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-My_kernel_restarts_when_I_run_a_large_query-Troubleshooting"></span>My kernel restarts when I run a large query<span data-mw-comment-end="h-My_kernel_restarts_when_I_run_a_large_query-Troubleshooting"></span></span></h3>
<p>It may be that your Jupyter Notebook Server ran out of memory and the operating system's
<a rel="nofollow" class="external text" href="https://www.kernel.org/doc/gorman/html/understand/understand016.html">out of memory killer</a>
decided to kill your kernel to cope with the situation. You won't get any notification that this
has happened other than the notebook restarting, but you can assess the state of the memory on
the notebook server by checking its host overview dashboard in <a href="/wiki/Grafana.wikimedia.org" title="Grafana.wikimedia.org">Grafana</a>
(<a class="external text" href="https://grafana.wikimedia.org/d/000000377/host-overview">host-overview dashboard</a>) or using the
command line to see which processes are using the most (with <code>ps aux --sort -rss | head</code>
or similar).
</p>
<h3><span class="mw-headline" id="Viewing_Jupyter_Notebook_Server_logs" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Viewing_Jupyter_Notebook_Server_logs-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Viewing_Jupyter_Notebook_Server_logs-Troubleshooting"></span>Viewing Jupyter Notebook Server logs<span data-mw-comment-end="h-Viewing_Jupyter_Notebook_Server_logs-Troubleshooting"></span></span></h3>
<p>JupyterHub logs are viewable by normal users in <a href="/wiki/Kibana" class="mw-redirect" title="Kibana">Kibana</a>.
</p><p>A dashboard has been created named <a class="external text" href="https://logstash.wikimedia.org/app/dashboards#/view/af2a44f0-2c0e-11ec-81e9-e1226573bad4">JupyterHub</a> and this is also linked from the <a class="external text" href="https://logstash.wikimedia.org/app/dashboards#/view/default?">Home Dashboard</a>.
</p><p>At present the logs are not split per user, but we are working to make this possible.
</p><p>They are no longer written by default to <code>/var/log/syslog</code> but they are retained on the host in the <a href="/wiki/Systemd" title="Systemd">systemd</a> journal.
</p><p>You might need to see JupyterHub logs to troubleshoot login issues or resource issues affecting the cluster.
</p><p>An individual user's notebook server log  be examined with the following command
</p>
<pre>sudo journalctl -f -u jupyter-$USERNAME-singleuser.service
</pre>
<h3><span class="mw-headline" id="Viewing_JupyterHub_logs" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Viewing_JupyterHub_logs-Troubleshooting&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Viewing_JupyterHub_logs-Troubleshooting"></span>Viewing JupyterHub logs<span data-mw-comment-end="h-Viewing_JupyterHub_logs-Troubleshooting"></span></span></h3>
<p>TODO: Make this work for regular users!
</p><p>You might need to see JupyterHub logs to troubleshoot login issues:
</p>
<pre> sudo journalctl -f -u jupyterhub
</pre>
<h2><span class="mw-headline" id="Tips" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Tips&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Tips"></span>Tips<span data-mw-comment-end="h-Tips"></span></span></h2>
<p><a href="/wiki/Analytics/Systems/Jupyter/Tips" title="Analytics/Systems/Jupyter/Tips">Analytics/Systems/Jupyter/Tips</a>
</p>
<h2><span class="mw-headline" id="Administration" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Administration&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Administration"></span>Administration<span data-mw-comment-end="h-Administration"></span></span></h2>
<p><a href="/wiki/Analytics/Systems/Jupyter/Administration" title="Analytics/Systems/Jupyter/Administration">Analytics/Systems/Jupyter/Administration</a>
</p>
<!-- 
NewPP limit report
Parsed by labweb1001
Cached time: 20220420140921
Cache expiry: 1814400
Reduced expiry: false
Complications: []
DiscussionTools time usage: 0.021 seconds
CPU time usage: 0.082 seconds
Real time usage: 1.029 seconds
Preprocessor visited node count: 126/1000000
Post‐expand include size: 256/2097152 bytes
Template argument size: 127/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 0/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 7162/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   16.146      1 -total
100.00%   16.146      1 Template:Ptag
 54.24%    8.758      1 Template:Badge
-->

<!-- Saved in parser cache with key labswiki:pcache:idhash:447004-0!canonical and timestamp 20220420140920 and revision id 1948908. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Jupyter&amp;oldid=1948908">https://wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Jupyter&amp;oldid=1948908</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-createaccount" class="mw-list-item"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Analytics%2FSystems%2FJupyter" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Analytics%2FSystems%2FJupyter" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Analytics/Systems/Jupyter" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/w/index.php?title=Talk:Analytics/Systems/Jupyter&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="/wiki/Analytics/Systems/Jupyter"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Jupyter&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Jupyter&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="/w/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Wikitech" aria-label="Search Wikitech" autocapitalize="sentences" title="Search Wikitech [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Main_Page"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage-description" class="mw-list-item"><a href="/wiki/Main_Page" icon="home" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" icon="recentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-Server-admin-log:-Prod" class="mw-list-item"><a href="/wiki/Server_Admin_Log"><span>Server admin log: Prod</span></a></li><li id="n-Admin-log:-RelEng" class="mw-list-item"><a href="/wiki/Release_Engineering/SAL"><span>Admin log: RelEng</span></a></li><li id="n-Incident-status" class="mw-list-item"><a href="/wiki/Incident_status"><span>Incident status</span></a></li><li id="n-Deployments" class="mw-list-item"><a href="/wiki/Deployments"><span>Deployments</span></a></li><li id="n-SRE/Operations-Help" class="mw-list-item"><a href="/wiki/SRE_Team_requests"><span>SRE/Operations Help</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-Cloud_VPS_&amp;_Toolforge" class="mw-portlet mw-portlet-Cloud_VPS_Toolforge vector-menu vector-menu-portal portal" aria-labelledby="p-Cloud_VPS_&amp;_Toolforge-label" role="navigation" 
	 >
	<label id="p-Cloud_VPS_&amp;_Toolforge-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Cloud VPS &amp; Toolforge</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Cloud-VPS-portal" class="mw-list-item"><a href="/wiki/Portal:Cloud_VPS"><span>Cloud VPS portal</span></a></li><li id="n-Toolforge-portal" class="mw-list-item"><a href="/wiki/Portal:Toolforge"><span>Toolforge portal</span></a></li><li id="n-Request-VPS-project" class="mw-list-item"><a href="https://phabricator.wikimedia.org/project/view/2875/"><span>Request VPS project</span></a></li><li id="n-Admin-log:-Cloud-VPS" class="mw-list-item"><a href="/wiki/Cloud_VPS_Server_Admin_Log"><span>Admin log: Cloud VPS</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Analytics/Systems/Jupyter" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Analytics/Systems/Jupyter" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Jupyter&amp;oldid=1948908" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Jupyter&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-cite" class="mw-list-item"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Analytics%2FSystems%2FJupyter&amp;id=1948908&amp;wpFormIdentifier=titleform" title="Information on how to cite this page"><span>Cite this page</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-coll-print_export" class="mw-portlet mw-portlet-coll-print_export vector-menu vector-menu-portal portal" aria-labelledby="p-coll-print_export-label" role="navigation" 
	 >
	<label id="p-coll-print_export-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Print/export</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="coll-create_a_book" class="mw-list-item"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Analytics%2FSystems%2FJupyter"><span>Create a book</span></a></li><li id="coll-download-as-rl" class="mw-list-item"><a href="/w/index.php?title=Special:DownloadAsPdf&amp;page=Analytics%2FSystems%2FJupyter&amp;action=show-download-screen"><span>Download as PDF</span></a></li><li id="t-print" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Jupyter&amp;printable=yes" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 14 February 2022, at 15:18.</li>
	<li id="footer-info-copyright">Text is available under the <a href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a>;
additional terms may apply.
See <a href="https://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a> for details.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/Main_Page" title="Main Page">About Wikitech</a></li>
	<li id="footer-places-disclaimer"><a href="https://foundation.wikimedia.org/wiki/General_disclaimer" class="extiw" title="wikimedia:General disclaimer">Disclaimers</a></li>
	<li id="footer-places-wm-codeofconduct"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Code_of_Conduct">Code of Conduct</a></li>
	<li id="footer-places-mobileview"><a href="//wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Jupyter&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/wikitech.wikimedia.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement">Cookie statement</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/"><img src="/static/images/footer/wikimedia-button.png" srcset="/static/images/footer/wikimedia-button-1.5x.png 1.5x, /static/images/footer/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation" loading="lazy" /></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/static/images/footer/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/footer/poweredby_mediawiki_132x47.png 1.5x, /static/images/footer/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"discussiontools":{"limitreport-timeusage":"0.021"},"limitreport":{"cputime":"0.082","walltime":"1.029","ppvisitednodes":{"value":126,"limit":1000000},"postexpandincludesize":{"value":256,"limit":2097152},"templateargumentsize":{"value":127,"limit":2097152},"expansiondepth":{"value":7,"limit":100},"expensivefunctioncount":{"value":0,"limit":500},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":7162,"limit":5000000},"timingprofile":["100.00%   16.146      1 -total","100.00%   16.146      1 Template:Ptag"," 54.24%    8.758      1 Template:Badge"]},"cachereport":{"origin":"labweb1001","timestamp":"20220420140921","ttl":1814400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":183,"wgHostname":"labweb1002"});});</script>
</body>
</html>