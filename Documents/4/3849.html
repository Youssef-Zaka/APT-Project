<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Analytics/Systems/Cluster/Page and user history reconstruction algorithm - Wikitech</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"c355bffa-5604-4b2f-accc-defdc61e6946","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm","wgTitle":"Analytics/Systems/Cluster/Page and user history reconstruction algorithm","wgCurRevisionId":1880515,"wgRevisionId":1880515,"wgArticleId":249653,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm","wgRelevantArticleId":
249653,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":5000,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgULSCurrentAutonym":"English","wgEditSubmitButtonLabelPublish":true,"wgDiscussionToolsFeaturesEnabled":{"replytool":true,"newtopictool":false,"sourcemodetoolbar":true,"topicsubscription":false,"autotopicsub":false},"wgDiscussionToolsFallbackEditMode":"visual","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgSiteNoticeId":"2.0"};RLSTATE={"ext.gadget.enwp-boxes":"ready","site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.discussionTools.init.styles":"ready","skins.vector.styles.legacy":"ready",
"ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.uls.pt":"ready","ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","mmv.head","mmv.bootstrap.autostart","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.eventLogging","ext.wikimediaEvents","ext.gadget.site","ext.discussionTools.init","ext.uls.compactlinks","ext.uls.interface","ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.discussionTools.init.styles%7Cext.dismissableSiteNotice.styles%7Cext.uls.pt%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.gadget.enwp-boxes&amp;only=styles&amp;skin=vector"/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.0-wmf.10"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-crossorigin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta property="og:title" content="Analytics/Systems/Cluster/Page and user history reconstruction algorithm - Wikitech"/>
<meta property="og:type" content="website"/>
<link rel="preconnect" href="//upload.wikimedia.org"/>
<link rel="shortcut icon" href="/static/favicon/wikitech.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikitech (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//wikitech.wikimedia.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="canonical" href="https://wikitech.wikimedia.org/wiki/Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm"/>
</head>
<body class="ext-discussiontools-replytool-enabled ext-discussiontools-sourcemodetoolbar-enabled mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Analytics_Systems_Cluster_Page_and_user_history_reconstruction_algorithm rootpage-Analytics skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"><div id="mw-dismissablenotice-anonplace"></div><script>(function(){var node=document.getElementById("mw-dismissablenotice-anonplace");if(node){node.outerHTML="\u003Cdiv class=\"mw-dismissable-notice\"\u003E\u003Cdiv class=\"mw-dismissable-notice-close\"\u003E[\u003Ca tabindex=\"0\" role=\"button\"\u003Edismiss\u003C/a\u003E]\u003C/div\u003E\u003Cdiv class=\"mw-dismissable-notice-body\"\u003E\u003Cdiv id=\"localNotice\"\u003E\u003Cdiv class=\"sitenotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Cdiv class=\"center\"\u003E\u003Ca href=\"https://www.mediawiki.org/wiki/Wikimedia_Hackathon_2022\" class=\"extiw\" title=\"mw:Wikimedia Hackathon 2022\"\u003EWikimedia Hackathon 2022\u003C/a\u003E will be held \u003Ci\u003Eonline\u003C/i\u003E May 20-22, 2022.\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E";}}());</script></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Analytics/Systems/Cluster/Page and user history reconstruction algorithm</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Wikitech</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="/wiki/Analytics" class="mw-redirect" title="Analytics">Analytics</a>&lrm; | <a href="/wiki/Analytics/Systems" title="Analytics/Systems">Systems</a>&lrm; | <a href="/wiki/Analytics/Systems/Cluster" title="Analytics/Systems/Cluster">Cluster</a></span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p>This page describes the history reconstruction algorithm, with the performance challenges the Analytics team had when developing it and the solutions they found.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Technical_context"><span class="tocnumber">1</span> <span class="toctext">Technical context</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_algorithm"><span class="tocnumber">2</span> <span class="toctext">The algorithm</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Problem"><span class="tocnumber">3</span> <span class="toctext">Problem</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Performance_optimizations"><span class="tocnumber">4</span> <span class="toctext">Performance optimizations</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#1._Fixed-point"><span class="tocnumber">4.1</span> <span class="toctext">1. Fixed-point</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#2._&quot;Backwards_time-lining&quot;"><span class="tocnumber">4.2</span> <span class="toctext">2. "Backwards time-lining"</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#3._Subgraph_partitioning"><span class="tocnumber">4.3</span> <span class="toctext">3. Subgraph partitioning</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Technical_context" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Technical_context&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Technical_context"></span>Technical context<span data-mw-comment-end="h-Technical_context"></span></span></h2>
<p>The algorithm is an Apache Spark job written in Scala that runs on the <a href="/wiki/Analytics/Cluster" class="mw-redirect" title="Analytics/Cluster">Analytics' Hadoop cluster</a> . It reads the data from the MediaWiki databases having been imported to Hadoop via the <a href="/wiki/Analytics/Data_Lake/Pipeline/Data_loading" class="mw-redirect" title="Analytics/Data Lake/Pipeline/Data loading">data loading</a> process. It then processes that data and outputs the results in a couple of tables in Hadoop. The algorithm is not incremental, it processes the whole history every time it runs. An important detail is that Spark uses <a rel="nofollow" class="external text" href="http://www.sparktutorials.net/Getting+Started+with+Apache+Spark+RDDs">RDDs (Resilient Distributed Datasets)</a> to process big data and this will affect the final algorithm.
</p>
<h2><span class="mw-headline" id="The_algorithm" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-The_algorithm&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-The_algorithm"></span>The algorithm<span data-mw-comment-end="h-The_algorithm"></span></span></h2>
<p>The reconstruction algorithm (both for user and page history reconstruction) is, in its core, a workaround on the fact that MediaWiki logging table does not store the page nor the user IDs in its events. This means that all the events that affect a single user or page can not be linked together using a unique ID. They can only be linked using the user names and page titles. But those names and titles can change over time, and two users can have the same name at different points in time. So the user/page events can not be simply grouped by name/title, they need to be traced back in time, starting from the current status of the database.
</p><p>The following gif tries to explain how the algorithm works. At the top, there is a list of events coming from the logging table sorted by timestamp (t1, t2, ...), and at the bottom there is the current state of the user table, on top of it, the algorithm will reconstruct the history provided by the events above. Note that [t1-t2] means "from timestamp t1 to timestamp t2", and [?-t3] means "from some unknown point in the past until timestamp t3".
</p><p><span class="mw-default-size" typeof="mw:Image"><a href="/wiki/File:EditHistoryReconstruction.gif" class="mw-file-description" title="Edit history reconstruction algorithm (simplification)"><img alt="Edit history reconstruction algorithm (simplification)" src="https://upload.wikimedia.org/wikipedia/commons/5/5a/EditHistoryReconstruction.gif" decoding="async" width="637" height="269" data-file-width="637" data-file-height="269"/></a></span>
</p><p>The page history is reconstructed in a very similar way, the main difference being that the page title always goes together with the page namespace. So both should be considered when joining events with history states. For simplicity reasons, the example shows only rename events, but in reality there are many other events, like: deletions, restores, blocks, rights, etc. However, those are simpler than the renames in term of managing history.
</p>
<h2><span class="mw-headline" id="Problem" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Problem&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Problem"></span>Problem<span data-mw-comment-end="h-Problem"></span></span></h2>
<p>The history reconstruction algorithm needs several tables from the MediaWiki databases: archive, logging, page, revision and user. And needs them for the ~800 databases there are. In total this data has the size of >200GB in AVRO compressed format. It's not huge data, but the algorithm needs to apply several complex joins that become a serious computational challenge.
</p>
<h2><span class="mw-headline" id="Performance_optimizations" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Performance_optimizations&quot;,&quot;replies&quot;:[&quot;h-1._Fixed-point-Performance_optimizations&quot;,&quot;h-2._\&quot;Backwards_time-lining\&quot;-Performance_optimizations&quot;,&quot;h-3._Subgraph_partitioning-Performance_optimizations&quot;],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Performance_optimizations"></span>Performance optimizations<span data-mw-comment-end="h-Performance_optimizations"></span></span></h2>
<p>Here are the solutions we implemented to overcome the described problem.
</p>
<h3><span class="mw-headline" id="1._Fixed-point" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-1._Fixed-point-Performance_optimizations&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-1._Fixed-point-Performance_optimizations"></span>1. Fixed-point<span data-mw-comment-end="h-1._Fixed-point-Performance_optimizations"></span></span></h3>
<p>The algorithm shown in the gif example, corresponds to the first version that we implemented. It was a fixed-point algorithm, that would join lots of events to the reconstructed history in a single step, and then would repeat the whole thing and join again. This would go on and on until all (joinable) events were consumed: fixed-point. However, some pages or users have a very long history in MediaWiki, with thousands of events. And this made the algorithm have too many steps and take too long to initialize and setup the RDDs at every algorithm step. In addition to that, the parallel nature of the fixed-point revealed several correctness issues that applied to a considerable portion of events.
</p>
<h3><span id="2._.22Backwards_time-lining.22"></span><span class="mw-headline" id="2._&quot;Backwards_time-lining&quot;" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-2._\&quot;Backwards_time-lining\&quot;-Performance_optimizations&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-2._&quot;Backwards_time-lining&quot;-Performance_optimizations"></span>2. "Backwards time-lining"<span data-mw-comment-end="h-2._&quot;Backwards_time-lining&quot;-Performance_optimizations"></span></span></h3>
<p>The solution we came with was processing one event at a time while going backwards in time. This solution would not use RDDs to process the data, so the performance problems associated with users/pages with long histories would disappear, and also for not joining lots of asynchronous events at the same step, this new strategy would not have the correctness issues. It worked like a charm for small wikis like simplewiki, but as the data needed to be in memory, it didn't work for enwiki and other large wikis.
</p>
<h3><span class="mw-headline" id="3._Subgraph_partitioning" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-3._Subgraph_partitioning-Performance_optimizations&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:3,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-3._Subgraph_partitioning-Performance_optimizations"></span>3. Subgraph partitioning<span data-mw-comment-end="h-3._Subgraph_partitioning-Performance_optimizations"></span></span></h3>
<p>So the final solution was to partition the data in pieces before applying the "backwards time-lining", so that each piece would fit in memory and could be processed in parallel in a separate node. The split that turned out to be the best was splitting by subgraphs. Picture the MediaWiki page universe as a graph where each page title ever used was a vertex and each page move event (rename) was an edge connecting two of those vertices. There would be naturally some unconnected subgraphs that could be processed independently without affecting the other subgraphs. The solution is to apply this subgraph partitioning as a pre-processing stage, and then apply "Backwards time-lining" over each of the disconnected subgraphs.
</p>
<!-- 
NewPP limit report
Parsed by labweb1001
Cached time: 20220421134805
Cache expiry: 1814400
Reduced expiry: false
Complications: []
DiscussionTools time usage: 0.007 seconds
CPU time usage: 0.044 seconds
Real time usage: 0.277 seconds
Preprocessor visited node count: 24/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key labswiki:pcache:idhash:249653-0!canonical and timestamp 20220421134805 and revision id 1880515. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;oldid=1880515">https://wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;oldid=1880515</a>"</div></div>
		<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-createaccount" class="mw-list-item"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Analytics%2FSystems%2FCluster%2FPage+and+user+history+reconstruction+algorithm" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Analytics%2FSystems%2FCluster%2FPage+and+user+history+reconstruction+algorithm" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/w/index.php?title=Talk:Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="/wiki/Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="/w/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Wikitech" aria-label="Search Wikitech" autocapitalize="sentences" title="Search Wikitech [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Main_Page"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage-description" class="mw-list-item"><a href="/wiki/Main_Page" icon="home" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" icon="recentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-Server-admin-log:-Prod" class="mw-list-item"><a href="/wiki/Server_Admin_Log"><span>Server admin log: Prod</span></a></li><li id="n-Admin-log:-RelEng" class="mw-list-item"><a href="/wiki/Release_Engineering/SAL"><span>Admin log: RelEng</span></a></li><li id="n-Incident-status" class="mw-list-item"><a href="/wiki/Incident_status"><span>Incident status</span></a></li><li id="n-Deployments" class="mw-list-item"><a href="/wiki/Deployments"><span>Deployments</span></a></li><li id="n-SRE/Operations-Help" class="mw-list-item"><a href="/wiki/SRE_Team_requests"><span>SRE/Operations Help</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-Cloud_VPS_&amp;_Toolforge" class="mw-portlet mw-portlet-Cloud_VPS_Toolforge vector-menu vector-menu-portal portal" aria-labelledby="p-Cloud_VPS_&amp;_Toolforge-label" role="navigation" 
	 >
	<label id="p-Cloud_VPS_&amp;_Toolforge-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Cloud VPS &amp; Toolforge</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Cloud-VPS-portal" class="mw-list-item"><a href="/wiki/Portal:Cloud_VPS"><span>Cloud VPS portal</span></a></li><li id="n-Toolforge-portal" class="mw-list-item"><a href="/wiki/Portal:Toolforge"><span>Toolforge portal</span></a></li><li id="n-Request-VPS-project" class="mw-list-item"><a href="https://phabricator.wikimedia.org/project/view/2875/"><span>Request VPS project</span></a></li><li id="n-Admin-log:-Cloud-VPS" class="mw-list-item"><a href="/wiki/Cloud_VPS_Server_Admin_Log"><span>Admin log: Cloud VPS</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;oldid=1880515" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-cite" class="mw-list-item"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Analytics%2FSystems%2FCluster%2FPage_and_user_history_reconstruction_algorithm&amp;id=1880515&amp;wpFormIdentifier=titleform" title="Information on how to cite this page"><span>Cite this page</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-coll-print_export" class="mw-portlet mw-portlet-coll-print_export vector-menu vector-menu-portal portal" aria-labelledby="p-coll-print_export-label" role="navigation" 
	 >
	<label id="p-coll-print_export-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Print/export</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="coll-create_a_book" class="mw-list-item"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Analytics%2FSystems%2FCluster%2FPage+and+user+history+reconstruction+algorithm"><span>Create a book</span></a></li><li id="coll-download-as-rl" class="mw-list-item"><a href="/w/index.php?title=Special:DownloadAsPdf&amp;page=Analytics%2FSystems%2FCluster%2FPage_and_user_history_reconstruction_algorithm&amp;action=show-download-screen"><span>Download as PDF</span></a></li><li id="t-print" class="mw-list-item"><a href="/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;printable=yes" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 7 September 2020, at 22:42.</li>
	<li id="footer-info-copyright">Text is available under the <a href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a>;
additional terms may apply.
See <a href="https://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a> for details.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/Main_Page" title="Main Page">About Wikitech</a></li>
	<li id="footer-places-disclaimer"><a href="https://foundation.wikimedia.org/wiki/General_disclaimer" class="extiw" title="wikimedia:General disclaimer">Disclaimers</a></li>
	<li id="footer-places-wm-codeofconduct"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Code_of_Conduct">Code of Conduct</a></li>
	<li id="footer-places-mobileview"><a href="//wikitech.wikimedia.org/w/index.php?title=Analytics/Systems/Cluster/Page_and_user_history_reconstruction_algorithm&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/wikitech.wikimedia.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement">Cookie statement</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/"><img src="/static/images/footer/wikimedia-button.png" srcset="/static/images/footer/wikimedia-button-1.5x.png 1.5x, /static/images/footer/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation" loading="lazy" /></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/static/images/footer/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/footer/poweredby_mediawiki_132x47.png 1.5x, /static/images/footer/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"discussiontools":{"limitreport-timeusage":"0.007"},"limitreport":{"cputime":"0.044","walltime":"0.277","ppvisitednodes":{"value":24,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":100},"expensivefunctioncount":{"value":0,"limit":500},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"origin":"labweb1001","timestamp":"20220421134805","ttl":1814400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":106,"wgHostname":"labweb1002"});});</script>
</body>
</html>