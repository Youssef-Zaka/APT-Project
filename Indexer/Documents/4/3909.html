<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Analytics/Data Lake/Traffic/Pageview hourly - Wikitech</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"d1c13277-7326-4da9-810d-30881cd35801","wgCSPNonce":false,"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Analytics/Data_Lake/Traffic/Pageview_hourly","wgTitle":"Analytics/Data Lake/Traffic/Pageview hourly","wgCurRevisionId":1916427,"wgRevisionId":1916427,"wgArticleId":24479,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Data stream"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Analytics/Data_Lake/Traffic/Pageview_hourly","wgRelevantArticleId":24479,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,
"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"Analytics/Data/Pageview_hourly","wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","pageVariantFallbacks":"en"},"wgMFDisplayWikibaseDescriptions":{"search":true,"nearby":true,"watchlist":true,"tagline":false},"wgWMESchemaEditAttemptStepOversample":false,"wgWMEPageLength":10000,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgULSCurrentAutonym":"English","wgInternalRedirectTargetUrl":"/wiki/Analytics/Data_Lake/Traffic/Pageview_hourly","wgEditSubmitButtonLabelPublish":true,"wgDiscussionToolsFeaturesEnabled":{"replytool":true,"newtopictool":false,"sourcemodetoolbar":true,"topicsubscription":false,"autotopicsub":false},"wgDiscussionToolsFallbackEditMode":"visual","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgSiteNoticeId":"2.0"};RLSTATE={"ext.gadget.enwp-boxes":"ready","site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready"
,"ext.cite.styles":"ready","ext.discussionTools.init.styles":"ready","skins.vector.styles.legacy":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.uls.pt":"ready","ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["mediawiki.action.view.redirect","ext.cite.ux-enhancements","site","mediawiki.page.ready","mediawiki.toc","skins.vector.legacy.js","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.eventLogging","ext.wikimediaEvents","ext.gadget.site","ext.discussionTools.init","ext.uls.compactlinks","ext.uls.interface","ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1i9g4",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});});});</script>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.cite.styles%7Cext.discussionTools.init.styles%7Cext.dismissableSiteNotice.styles%7Cext.pygments%7Cext.uls.pt%7Cext.visualEditor.desktopArticleTarget.noscript%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/w/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=ext.gadget.enwp-boxes&amp;only=styles&amp;skin=vector"/>
<link rel="stylesheet" href="/w/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.39.0-wmf.10"/>
<meta name="referrer" content="origin"/>
<meta name="referrer" content="origin-when-crossorigin"/>
<meta name="referrer" content="origin-when-cross-origin"/>
<meta name="format-detection" content="telephone=no"/>
<meta property="og:title" content="Analytics/Data Lake/Traffic/Pageview hourly - Wikitech"/>
<meta property="og:type" content="website"/>
<link rel="shortcut icon" href="/static/favicon/wikitech.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikitech (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="//wikitech.wikimedia.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Wikitech Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="https://wikitech.wikimedia.org/wiki/Analytics/Data_Lake/Traffic/Pageview_hourly"/>
</head>
<body class="ext-discussiontools-replytool-enabled ext-discussiontools-sourcemodetoolbar-enabled mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Analytics_Data_Lake_Traffic_Pageview_hourly rootpage-Analytics skin-vector action-view skin-vector-legacy"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"><div id="mw-dismissablenotice-anonplace"></div><script>(function(){var node=document.getElementById("mw-dismissablenotice-anonplace");if(node){node.outerHTML="\u003Cdiv class=\"mw-dismissable-notice\"\u003E\u003Cdiv class=\"mw-dismissable-notice-close\"\u003E[\u003Ca tabindex=\"0\" role=\"button\"\u003Edismiss\u003C/a\u003E]\u003C/div\u003E\u003Cdiv class=\"mw-dismissable-notice-body\"\u003E\u003Cdiv id=\"localNotice\"\u003E\u003Cdiv class=\"sitenotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Cdiv class=\"center\"\u003E\u003Ca href=\"https://www.mediawiki.org/wiki/Wikimedia_Hackathon_2022\" class=\"extiw\" title=\"mw:Wikimedia Hackathon 2022\"\u003EWikimedia Hackathon 2022\u003C/a\u003E will be held \u003Ci\u003Eonline\u003C/i\u003E May 20-22, 2022.\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E";}}());</script></div>
	<div class="mw-indicators">
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Analytics/Data Lake/Traffic/Pageview hourly</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Wikitech</div>
		<div id="contentSub"><span class="subpages">&lt; <a href="/wiki/Analytics" class="mw-redirect" title="Analytics">Analytics</a>&lrm; | <a href="/wiki/Analytics/Data_Lake" title="Analytics/Data Lake">Data Lake</a>&lrm; | <a href="/wiki/Analytics/Data_Lake/Traffic" title="Analytics/Data Lake/Traffic">Traffic</a></span><span class="mw-redirectedfrom">(Redirected from <a href="/w/index.php?title=Analytics/Data/Pageview_hourly&amp;redirect=no" class="mw-redirect" title="Analytics/Data/Pageview hourly">Analytics/Data/Pageview hourly</a>)</span></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p>The <tt>wmf.pageview_hourly</tt> table (available on <a href="/wiki/Analytics/Cluster/Hive" class="mw-redirect" title="Analytics/Cluster/Hive">Hive</a>) contains 'pre-aggregated' <a href="/wiki/Analytics/Data/Webrequest" class="mw-redirect" title="Analytics/Data/Webrequest">webrequest</a> data, filtered to keep only <a href="https://meta.wikimedia.org/wiki/Research:Page_view" class="extiw" title="m:Research:Page view">pageviews</a>, and aggregated over a predefined set of dimensions. It is stored in the Parquet columnar file format and partitioned by (year, month, day, hour). The data goes back to May 1, 2015.
</p><p>As of 2018, this dataset is not public for privacy reasons, but less granular pageview data derived from it is made public in various forms, see <a href="https://meta.wikimedia.org/wiki/Research:Page_view" class="extiw" title="m:Research:Page view">m:Research:Page view</a>. 
</p><p><b>Notes:</b> 
</p>
<ul><li>For performance optimization across jobs, the data is actually aggregated from the <a href="/wiki/Analytics/Data_Lake/Traffic/Pageview_actor" title="Analytics/Data Lake/Traffic/Pageview actor">pageview_actor</a> intermediate dataset, itself being a filtered view of webrequest.</li>
<li>The <a href="/wiki/Analytics/Data/Projectview_hourly" class="mw-redirect" title="Analytics/Data/Projectview hourly">Projectview hourly</a> table is a much smaller table containing the same data without <code>page_title</code> and <code>page_id</code> (and some other fields like  <code>user_agent_map</code>), meaning it is aggregated at the project level.</li>
<li>Projectview data (without page-title and page-id) is also available in Druid fast-querying engine. Many of the classical project-level queries should be answered with either <a class="external text" href="https://turnilo.wikimedia.org">Turnilo</a> or <a class="external text" href="https://superset.wikimedia.org">Superset</a> on <code>pageview_daily</code> or <code>pageview_hourly</code> datasources (LDAP access required).</li></ul>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Current_Schema"><span class="tocnumber">1</span> <span class="toctext">Current Schema</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Sample_queries"><span class="tocnumber">2</span> <span class="toctext">Sample queries</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Changes_and_known_problems_since_2015-06-16"><span class="tocnumber">3</span> <span class="toctext">Changes and known problems since 2015-06-16</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Notes"><span class="tocnumber">5</span> <span class="toctext">Notes</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Current_Schema" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Current_Schema&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Current_Schema"></span>Current Schema<span data-mw-comment-end="h-Current_Schema"></span></span></h2>
<pre>$ hive --database wmf

hive (wmf)> describe pageview_hourly;
OK
col_name    data_type   comment
project                 string                  Project name from requests hostname
language_variant        string                  Language variant from requests path (not set if present in project name)
page_title              string                  Page Title from requests path and query
access_method           string                  Method used to access the pages, can be desktop, mobile web, or mobile app
zero_carrier            string                  Zero carrier if pageviews are accessed through one, null otherwise
agent_type              string                  Agent accessing the pages, can be spider,  user or automated
referer_class           string                  Can be none (null, empty or '-'), unknown (domain extraction failed), internal (domain is a wikimedia project), external (search engine) (domain is one of google, yahoo, bing, yandex, baidu, duckduckgo), external (any other)
continent               string                  Continent of the accessing agents (computed using maxmind GeoIP database)
country_code            string                  Country iso code of the accessing agents (computed using maxmind GeoIP database)
country                 string                  Country (text) of the accessing agents (computed using maxmind GeoIP database)
subdivision             string                  Subdivision of the accessing agents (computed using maxmind GeoIP database)
city                    string                  City iso code of the accessing agents (computed using maxmind GeoIP database)
user_agent_map      	map&lt;string,string>  	User-agent map with device_family, browser_family, browser_major, os_family, os_major, os_minor and wmf_app_version keys and associated values
record_version          string                  Keeps track of changes in the table content definition - https://wikitech.wikimedia.org/wiki/Analytics/Data/Pageview_hourly
view_count              bigint                  number of pageviews
page_id             	int                 	MediaWiki page_id for this page title. For redirects this could be the page_id of the redirect or the page_id of the target. This may not always be set, even if the page is actually a pageview.
namespace_id            int                     MediaWiki namespace_id for this page title. This may not always be set, even if the page is actually a pageview.
year                    int                     Unpadded year of pageviews
month                   int                     Unpadded month of pageviews
day                     int                     Unpadded day of pageviews
hour                    int                     Unpadded hour of pageviews
# Partition Information
# col_name              data_type               comment
year                    int                     Unpadded year of pageviews
month                   int                     Unpadded month of pageviews
day                     int                     Unpadded day of pageviews
hour                    int                     Unpadded hour of pageviews
</pre>
<p>Notice the <tt>year</tt>, <tt>month</tt>, <tt>day</tt>, and <tt>hour</tt> fields.  These are Hive <a rel="nofollow" class="external text" href="http://www.brentozar.com/archive/2013/03/introduction-to-hive-partitioning/">partitions</a>, and are explicit mappings to hourly aggregations in HDFS.  You must include at least one partition predicate in the <tt>where</tt> clause of your queries (even if it is just <tt>year > 0</tt>).  Partitions allow you to reduce the amount of data that Hive must parse and process before it returns you results.  For example, if are only interested in data during a particular day, you could add <tt>where year = 2014 and month = 1 and day = 12</tt>.  This will instruct Hive to only process data for partitions that match that partition predicate.  You may use partition fields as you would any normal field, even though the field values are not actually stored in the data files.
</p><p>The dataset contains both a page_title and page_id fields.
</p>
<ul><li><b>page_title</b> is extracted from the requested URL (either from path or query).  We expect it to be present and correct on most cases.  The special value used when the title is not extracted is <code>-</code>.</li></ul>
<ul><li><b>page_id</b> is received in the <a href="/wiki/X-Analytics" title="X-Analytics">X-Analytics</a> header.  As of 2017-06-12, page_id is populated on access methods <code>desktop</code> and <code>mobile web requests</code>, but not <code>mobile app</code>. This means that >95% of pageview requests have a page_id so far.   In case of redirects, the page_id we received is the one of the redirected-to page. This means that, for instance, on the English Wikipedia the same page_id <code>534366</code> is associated with the different page_titles <code>Barack_Obama</code> (original content page), <code>Barack_obama</code> (redirect to main content page), <code>Barack_Hussein_Obama</code> (another redirect),  <code>Barack_H._Obama</code> (again another redirect) ...</li></ul>
<p><br/>
</p>
<h2><span class="mw-headline" id="Sample_queries" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Sample_queries&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Sample_queries"></span>Sample queries<span data-mw-comment-end="h-Sample_queries"></span></span></h2>
<div class="mw-highlight mw-highlight-lang-sql mw-content-ltr" dir="ltr"><pre><span></span><span class="k">SELECT</span>
  <span class="n">concat</span><span class="p">(</span><span class="k">month</span><span class="p">,</span><span class="s1">'/'</span><span class="p">,</span><span class="k">day</span><span class="p">,</span><span class="s1">'/'</span><span class="p">,</span><span class="k">year</span><span class="p">),</span> <span class="n">access_method</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">view_count</span><span class="p">)</span>
<span class="k">FROM</span> 
  <span class="n">wmf</span><span class="p">.</span><span class="n">pageview_hourly</span>
<span class="k">WHERE</span>
  <span class="k">year</span> <span class="o">=</span> <span class="mi">2015</span>
  <span class="k">AND</span> <span class="k">month</span> <span class="o">=</span> <span class="mi">8</span>
  <span class="k">AND</span> <span class="n">agent_type</span> <span class="o">=</span> <span class="ss">"user"</span>
  <span class="k">AND</span> <span class="n">country</span> <span class="o">=</span> <span class="ss">"Canada"</span>
  <span class="k">AND</span> <span class="n">project</span> <span class="o">=</span> <span class="ss">"en.wikipedia"</span>
  <span class="k">AND</span> <span class="n">page_title</span> <span class="o">=</span> <span class="ss">"Justin_Trudeau"</span>
<span class="k">GROUP</span> <span class="k">BY</span>
  <span class="k">year</span><span class="p">,</span> <span class="k">month</span><span class="p">,</span> <span class="k">day</span><span class="p">,</span> <span class="n">access_method</span><span class="p">;</span>
</pre></div>
<h2><span class="mw-headline" id="Changes_and_known_problems_since_2015-06-16" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Changes_and_known_problems_since_2015-06-16&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Changes_and_known_problems_since_2015-06-16"></span>Changes and known problems since 2015-06-16<span data-mw-comment-end="h-Changes_and_known_problems_since_2015-06-16"></span></span></h2>
<table class="wikitable">

<tbody><tr>
<th>Date from</th>
<th>Task</th>
<th>record_version</th>
<th>Details
</th></tr>
<tr>
<td>2020-08-24
</td>
<td><a href="https://phabricator.wikimedia.org/T257860" class="extiw" title="phabricator:T257860">task T257860</a>
</td>
<td>
</td>
<td>Mobile pageview definition is corrected to count only pageviews with pageview=1 in the header, this correct issues with mobile pageviews apparent since late 2020 -05-18
</td></tr>
<tr>
<td>2020-07-01
</td>
<td><a href="https://phabricator.wikimedia.org/T256514" class="extiw" title="phabricator:T256514">task T256514</a>
</td>
<td>
</td>
<td>Update definition to count new android mobile content consumption.
</td></tr>
<tr>
<td>2020-06-25
</td>
<td><a href="https://phabricator.wikimedia.org/T256049" class="extiw" title="phabricator:T256049">task T256049</a>
</td>
<td>
</td>
<td>Aggregate from the intermediate <a href="/wiki/Analytics/Data_Lake/Traffic/Pageview_actor" title="Analytics/Data Lake/Traffic/Pageview actor">pageview_actor</a> table for performance.
</td></tr>
<tr>
<td>2020-04-29
</td>
<td><a href="https://phabricator.wikimedia.org/T238357" class="extiw" title="phabricator:T238357">task T238357</a>
</td>
<td>
</td>
<td>Add the <code>automated</code> agent-type. This agent-type is applied to pageviews identified as being requested by bots not self-identified (self-identified bots are categorized as <code>spider</code>). See <a href="/wiki/Analytics/Data_Lake/Traffic/BotDetection" title="Analytics/Data Lake/Traffic/BotDetection">Analytics/Data_Lake/Traffic/BotDetection</a> for more details.
</td></tr>
<tr>
<td>2020-04-21
</td>
<td><a href="https://phabricator.wikimedia.org/T245468" class="extiw" title="phabricator:T245468">task T245468</a>
</td>
<td>
</td>
<td>Update title validation to enable pageview data for pages with title that include characters with Unicode character values above 0xFFFF like emoji.
</td></tr>
<tr>
<td>2019-11-22
</td>
<td><a href="https://phabricator.wikimedia.org/T237743" class="extiw" title="phabricator:T237743">task T237743</a>
</td>
<td>
</td>
<td>Update of UA parser.
</td></tr>
<tr>
<td>2019-09-18
</td>
<td><a href="https://phabricator.wikimedia.org/T212854" class="extiw" title="phabricator:T212854">task T212854</a>
</td>
<td>
</td>
<td>Update user-agent parser to up-to-date version. Main differences are <code>os_family</code> bug fixes (<code>Windows 98</code> is now <code>Windows</code> for instance), <code>os_major</code> bug fixes (<code>8.1</code>is now <code>8</code>), <code>Google Search App</code> on IOs is not falsely counted at <code>Safari</code> anymore, and various <code>device_family</code> improvement.
</td></tr>
<tr>
<td>2019-07-22
</td>
<td><a href="https://phabricator.wikimedia.org/T226730" class="extiw" title="phabricator:T226730">task T226730</a>
</td>
<td>
</td>
<td>Special:Something pages removed from pageviews (other than Search pages), these pages should have been removed from day 1 but code was buggy.
</td></tr>
<tr>
<td>2019-04-23
</td>
<td><a href="https://phabricator.wikimedia.org/T144100" class="extiw" title="phabricator:T144100">task T144100</a>
</td>
<td>0.0.6
</td>
<td>We accidentally stopped computing pageviews for pages with a "plus" sign in the title.  This was fixed by <a href="https://phabricator.wikimedia.org/T224451" class="extiw" title="phab:T224451">Task: T224451</a>.
</td></tr>
<tr>
<td>2019-04-23
</td>
<td><a href="https://phabricator.wikimedia.org/T144100" class="extiw" title="phab:T144100">Task: T144100</a>
</td>
<td>0.0.6
</td>
<td>Invalid characters now removed from titles on pageview dumps
</td></tr>
<tr>
<td>2019-04-01
</td>
<td><a href="https://phabricator.wikimedia.org/T219842" class="extiw" title="phabricator:T219842">task T219842</a>
</td>
<td>
</td>
<td>Kafka jumbo failover produces some data loss for hour 22 UTC.
</td></tr>
<tr>
<td>2019-01-07
</td>
<td><a href="https://phabricator.wikimedia.org/T212862" class="extiw" title="phabricator:T212862">task T212862</a>, <a href="https://phabricator.wikimedia.org/T153821" class="extiw" title="phabricator:T153821">task T153821</a>
</td>
<td>
</td>
<td>Wikitech added to PageviewDefinition.
</td></tr>
<tr>
<td>2018-04
</td>
<td><a href="https://phabricator.wikimedia.org/T187014" class="extiw" title="phabricator:T187014">task T187014</a>
</td>
<td>
</td>
<td>From February 6 to April 16, 2018, the geolocation data for traffic from Opera browsers on mobile web was incorrect (wrongly labeled them as coming from the US, "Unknown" and some other countries rather than their true origin).
</td></tr>
<tr>
<td>2018-03-20
</td>
<td><a href="https://phabricator.wikimedia.org/T154702" class="extiw" title="phabricator:T154702">task T154702</a>
</td>
<td>
</td>
<td>Fixed broken referer categorization for Safari (see above), <a href="https://phabricator.wikimedia.org/F18636525" class="extiw" title="phab:F18636525">resulting</a>in an increase in pageviews classified as internally referred and decrease in pageviews recorded with "none" during April 2018
</td></tr>
<tr>
<td>2017-06
</td>
<td><a href="https://phabricator.wikimedia.org/T163233" class="extiw" title="phabricator:T163233">task T163233</a>
</td>
<td>
</td>
<td>Addition of throttling to cdn layer will reduce traffic spikes coming from the same ips in short time periods
</td></tr>
<tr>
<td>2017-02-09
</td>
<td><a href="https://phabricator.wikimedia.org/T156628" class="extiw" title="phabricator:T156628">task T156628</a>, <a href="https://phabricator.wikimedia.org/T155141" class="extiw" title="phabricator:T155141">task T155141</a>, <a href="https://phabricator.wikimedia.org/T157528" class="extiw" title="phabricator:T157528">task T157528</a>
</td>
<td>0.0.5
</td>
<td>Update pageview definition to remove previews (POST with "action=submit" in query is now excluded from pageviews). Add DSXS (self-identified bot) to bot regex. Add namespace_id field (not always present though).
</td></tr>
<tr>
<td>From 2016-02
</td>
<td><a href="https://phabricator.wikimedia.org/T148780" class="extiw" title="phabricator:T148780">task T148780</a>
</td>
<td>
</td>
<td>Meta referrer tag value not supported by Safari, Safari sessions would appear to be shorter
</td></tr>
<tr>
<td>2016-10
</td>
<td><a href="https://phabricator.wikimedia.org/T145922" class="extiw" title="phabricator:T145922">task T145922</a>
</td>
<td>
</td>
<td>Fix to mediawiki that changed requests that were (wrongly) returning 200 to (lawfully) return 404, those would not be counted as pageviews. We removed about 6 million pageviews monthly
</td></tr>
<tr>
<td>2016-08-05
</td>
<td><a href="https://phabricator.wikimedia.org/T141506" class="extiw" title="phabricator:T141506">task T141506</a>
</td>
<td>
</td>
<td>Spikes on pageviews for Main_Page in several projects, due to disproportionate number of requests of users in Chrome 41 on Windows. Maybe TLS bug on Windows security update.
</td></tr>
<tr>
<td>2016-02-22
</td>
<td><a href="https://phabricator.wikimedia.org/T148780" class="extiw" title="phabricator:T148780">task T148780</a>
</td>
<td>
</td>
<td>Since this date, browsers not implementing the referrer meta tag correctly fail to populate the referrer header when clicking on wiki internal links.
</td></tr>
<tr>
<td>2015-12-01
</td>
<td><a href="https://phabricator.wikimedia.org/T116023" class="extiw" title="phabricator:T116023">task T116023</a>
</td>
<td>0.0.4
</td>
<td>Add the mediawiki page_id for this title when available. For redirects this could be the page_id of the redirect or the page_id of the target. This may not always be set, even if the page is actually a pageview.
</td></tr>
<tr>
<td>2015-08-31
</td>
<td><a href="https://phabricator.wikimedia.org/T110614" class="extiw" title="phabricator:T110614">task T110614</a>
</td>
<td>0.0.3
</td>
<td>Backfilled data from the beginning of pageview_hourly (May 1st, 2015) to correct bugs:
<ul><li>in page_title, spaces were not always transformed into underscores</li>
<li>wrong hosts were included and are no more (outreach.wikimedia.org, donate.wikipedia.org, arbcom-*.wikipedia.org)</li></ul>
<p>We took advantage of this backfill to reorder the user_agent_map fields in a more coherent place.
</p>
</td></tr>
<tr>
<td>2015-06-01<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">[1]</a></sup>
</td>
<td><a href="https://phabricator.wikimedia.org/T107436" class="extiw" title="phabricator:T107436">task T107436</a>
</td>
<td>0.0.2
</td>
<td>Add parsed user agent data (user_agent_map field) to aggregated pageviews to prepare wikistat-2.0 request.
</td></tr>
<tr>
<td>2015-05-01<sup id="cite_ref-2" class="reference"><a href="#cite_note-2">[2]</a></sup>
</td>
<td><a href="https://phabricator.wikimedia.org/T99931" class="extiw" title="phabricator:T99931">task T99931</a>
</td>
<td>0.0.1
</td>
<td>Create table with pageviews aggregated from 'text' and 'mobile' refined webrequest sources and backfill aggregation from beginning of May.
</td></tr></tbody></table>
<h2><span class="mw-headline" id="See_also" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-See_also&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-See_also"></span>See also<span data-mw-comment-end="h-See_also"></span></span></h2>
<ul><li>The code that generates it:
<ul><li><a rel="nofollow" class="external free" href="https://github.com/wikimedia/analytics-refinery/blob/master/hive/pageview/hourly/create_pageview_hourly_table.hql">https://github.com/wikimedia/analytics-refinery/blob/master/hive/pageview/hourly/create_pageview_hourly_table.hql</a></li>
<li><a rel="nofollow" class="external free" href="https://github.com/wikimedia/analytics-refinery/tree/master/oozie/pageview/hourly">https://github.com/wikimedia/analytics-refinery/tree/master/oozie/pageview/hourly</a></li></ul></li>
<li>In 2015, a project about sanitizing the <tt>wmf.pageview_hourly</tt> data was launched, see <a href="/wiki/Analytics/Data/Pageview_hourly/Sanitization" class="mw-redirect" title="Analytics/Data/Pageview hourly/Sanitization">this page</a>.</li>
<li><a href="https://meta.wikimedia.org/wiki/Research:Page_view#Change_log" class="extiw" title="m:Research:Page view">m:Research:Page view#Change log</a> for changes to the page view definition itself, and <a href="/wiki/Analytics/Data_Lake/Traffic/Webrequest#Changes_and_known_problems_since_2015-03-04" title="Analytics/Data Lake/Traffic/Webrequest">Analytics/Data_Lake/Traffic/Webrequest#Changes and known problems since 2015-03-04</a> for issues and updates affecting all webrequests (including non-pageviews)</li>
<li>How redirects work in MediaWiki: <a href="https://phabricator.wikimedia.org/T53736" class="extiw" title="phabricator:T53736">task T53736</a></li></ul>
<h2><span class="mw-headline" id="Notes" data-mw-comment="{&quot;type&quot;:&quot;heading&quot;,&quot;level&quot;:0,&quot;id&quot;:&quot;h-Notes&quot;,&quot;replies&quot;:[],&quot;headingLevel&quot;:2,&quot;placeholderHeading&quot;:false,&quot;name&quot;:&quot;h-&quot;}"><span data-mw-comment-start="" id="h-Notes"></span>Notes<span data-mw-comment-end="h-Notes"></span></span></h2>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text">Action taken on the 31st of July, but since data is available from beginning of June, the date of this line is set so</span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">↑</a></span> <span class="reference-text">Action taken on the 7th of June, but since data is available from beginning of May, the date of this line is set so</span>
</li>
</ol>
<!-- 
NewPP limit report
Parsed by labweb1002
Cached time: 20220420192134
Cache expiry: 1814400
Reduced expiry: false
Complications: []
DiscussionTools time usage: 0.018 seconds
CPU time usage: 0.069 seconds
Real time usage: 0.072 seconds
Preprocessor visited node count: 851/1000000
Post‐expand include size: 2749/2097152 bytes
Template argument size: 895/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 0/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 5675/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   20.055      1 -total
 72.01%   14.442     27 Template:Phabricator
-->

<!-- Saved in parser cache with key labswiki:pcache:idhash:24479-0!canonical and timestamp 20220420192134 and revision id 1916427. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a dir="ltr" href="https://wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;oldid=1916427">https://wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;oldid=1916427</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:Data_stream" title="Category:Data stream">Data stream</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<label id="p-personal-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-createaccount" class="mw-list-item"><a href="/w/index.php?title=Special:CreateAccount&amp;returnto=Analytics%2FData+Lake%2FTraffic%2FPageview+hourly" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Create account</span></a></li><li id="pt-login" class="mw-list-item"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Analytics%2FData+Lake%2FTraffic%2FPageview+hourly" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li></ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu vector-menu-tabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<label id="p-namespaces-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Namespaces</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Analytics/Data_Lake/Traffic/Pageview_hourly" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/w/index.php?title=Talk:Analytics/Data_Lake/Traffic/Pageview_hourly&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox" aria-labelledby="p-variants-label" />
	<label id="p-variants-label" aria-label="Change language variant" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu vector-menu-tabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<label id="p-views-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Views</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="ca-view" class="selected mw-list-item"><a href="/wiki/Analytics/Data_Lake/Traffic/Pageview_hourly"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li></ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown-noicon vector-menu vector-menu-dropdown" aria-labelledby="p-cactions-label" role="navigation"  title="More options"
	 >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox" aria-labelledby="p-cactions-label" />
	<label id="p-cactions-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<div>
			<h3 >
				<label for="searchInput">Search</label>
			</h3>
		<form action="/w/index.php" id="searchform"
			class="vector-search-box-form">
			<div id="simpleSearch"
				class="vector-search-box-inner"
				 data-search-loc="header-navigation">
				<input class="vector-search-box-input"
					 type="search" name="search" placeholder="Search Wikitech" aria-label="Search Wikitech" autocapitalize="sentences" title="Search Wikitech [f]" accesskey="f" id="searchInput"
				/>
				<input type="hidden" name="title" value="Special:Search"/>
				<input id="mw-searchButton"
					 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search" />
				<input id="searchButton"
					 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go" />
			</div>
		</form>
	</div>
</div>

		</div>
	</div>
	

<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Main_Page"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu vector-menu-portal portal" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<label id="p-navigation-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Navigation</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-mainpage-description" class="mw-list-item"><a href="/wiki/Main_Page" icon="home" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" icon="recentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li><li id="n-Server-admin-log:-Prod" class="mw-list-item"><a href="/wiki/Server_Admin_Log"><span>Server admin log: Prod</span></a></li><li id="n-Admin-log:-RelEng" class="mw-list-item"><a href="/wiki/Release_Engineering/SAL"><span>Admin log: RelEng</span></a></li><li id="n-Incident-status" class="mw-list-item"><a href="/wiki/Incident_status"><span>Incident status</span></a></li><li id="n-Deployments" class="mw-list-item"><a href="/wiki/Deployments"><span>Deployments</span></a></li><li id="n-SRE/Operations-Help" class="mw-list-item"><a href="/wiki/SRE_Team_requests"><span>SRE/Operations Help</span></a></li></ul>
		
	</div>
</nav>

	
<nav id="p-Cloud_VPS_&amp;_Toolforge" class="mw-portlet mw-portlet-Cloud_VPS_Toolforge vector-menu vector-menu-portal portal" aria-labelledby="p-Cloud_VPS_&amp;_Toolforge-label" role="navigation" 
	 >
	<label id="p-Cloud_VPS_&amp;_Toolforge-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Cloud VPS &amp; Toolforge</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="n-Cloud-VPS-portal" class="mw-list-item"><a href="/wiki/Portal:Cloud_VPS"><span>Cloud VPS portal</span></a></li><li id="n-Toolforge-portal" class="mw-list-item"><a href="/wiki/Portal:Toolforge"><span>Toolforge portal</span></a></li><li id="n-Request-VPS-project" class="mw-list-item"><a href="https://phabricator.wikimedia.org/project/view/2875/"><span>Request VPS project</span></a></li><li id="n-Admin-log:-Cloud-VPS" class="mw-list-item"><a href="/wiki/Cloud_VPS_Server_Admin_Log"><span>Admin log: Cloud VPS</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<label id="p-tb-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Tools</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Analytics/Data_Lake/Traffic/Pageview_hourly" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Analytics/Data_Lake/Traffic/Pageview_hourly" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;oldid=1916427" title="Permanent link to this revision of the page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;action=info" title="More information about this page"><span>Page information</span></a></li><li id="t-cite" class="mw-list-item"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Analytics%2FData_Lake%2FTraffic%2FPageview_hourly&amp;id=1916427&amp;wpFormIdentifier=titleform" title="Information on how to cite this page"><span>Cite this page</span></a></li></ul>
		
	</div>
</nav>

<nav id="p-coll-print_export" class="mw-portlet mw-portlet-coll-print_export vector-menu vector-menu-portal portal" aria-labelledby="p-coll-print_export-label" role="navigation" 
	 >
	<label id="p-coll-print_export-label" aria-label="" class="vector-menu-heading "  >
		<span class="vector-menu-heading-label">Print/export</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="coll-create_a_book" class="mw-list-item"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Analytics%2FData+Lake%2FTraffic%2FPageview+hourly"><span>Create a book</span></a></li><li id="coll-download-as-rl" class="mw-list-item"><a href="/w/index.php?title=Special:DownloadAsPdf&amp;page=Analytics%2FData_Lake%2FTraffic%2FPageview_hourly&amp;action=show-download-screen"><span>Download as PDF</span></a></li><li id="t-print" class="mw-list-item"><a href="/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;printable=yes" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li></ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 23 June 2021, at 18:16.</li>
	<li id="footer-info-copyright">Text is available under the <a href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a>;
additional terms may apply.
See <a href="https://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a> for details.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://foundation.wikimedia.org/wiki/Privacy_policy" class="extiw" title="wmf:Privacy policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/Main_Page" title="Main Page">About Wikitech</a></li>
	<li id="footer-places-disclaimer"><a href="https://foundation.wikimedia.org/wiki/General_disclaimer" class="extiw" title="wikimedia:General disclaimer">Disclaimers</a></li>
	<li id="footer-places-wm-codeofconduct"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Code_of_Conduct">Code of Conduct</a></li>
	<li id="footer-places-mobileview"><a href="//wikitech.wikimedia.org/w/index.php?title=Analytics/Data_Lake/Traffic/Pageview_hourly&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
	<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
	<li id="footer-places-statslink"><a href="https://stats.wikimedia.org/#/wikitech.wikimedia.org">Statistics</a></li>
	<li id="footer-places-cookiestatement"><a href="https://foundation.wikimedia.org/wiki/Cookie_statement">Cookie statement</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://wikimediafoundation.org/"><img src="/static/images/footer/wikimedia-button.png" srcset="/static/images/footer/wikimedia-button-1.5x.png 1.5x, /static/images/footer/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation" loading="lazy" /></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/static/images/footer/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/static/images/footer/poweredby_mediawiki_132x47.png 1.5x, /static/images/footer/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"discussiontools":{"limitreport-timeusage":"0.018"},"limitreport":{"cputime":"0.069","walltime":"0.072","ppvisitednodes":{"value":851,"limit":1000000},"postexpandincludesize":{"value":2749,"limit":2097152},"templateargumentsize":{"value":895,"limit":2097152},"expansiondepth":{"value":7,"limit":100},"expensivefunctioncount":{"value":0,"limit":500},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":5675,"limit":5000000},"timingprofile":["100.00%   20.055      1 -total"," 72.01%   14.442     27 Template:Phabricator"]},"cachereport":{"origin":"labweb1002","timestamp":"20220420192134","ttl":1814400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":129,"wgHostname":"labweb1002"});});</script>
</body>
</html>